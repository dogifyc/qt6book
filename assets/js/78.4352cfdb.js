(window.webpackJsonp=window.webpackJsonp||[]).push([[78],{343:function(t,a){t.exports="data:image/png;base64,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"},702:function(t,a,s){"use strict";s.r(a);var e=s(24),n=Object(e.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"integrating-with-c"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#integrating-with-c"}},[t._v("#")]),t._v(" Integrating with C++")]),t._v(" "),e("h2",{attrs:{id:"the-c"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#the-c"}},[t._v("#")]),t._v(" The C++")]),t._v(" "),e("p",[t._v("In order to demonstrate the connection between C++ and QML in Qt for MCUs, we will create a simple "),e("code",[t._v("Counter")]),t._v(" singleton holding an integer value. Notice that we start from a "),e("code",[t._v("struct")]),t._v(" and not a "),e("code",[t._v("class")]),t._v(". This is common practice in Qt Quick Ultralite.")]),t._v(" "),e("p",[t._v("The singleton will be used from a small UI as shown below.")]),t._v(" "),e("p",[e("img",{attrs:{src:s(343),alt:""}})]),t._v(" "),e("p",[t._v("The "),e("code",[t._v("Counter")]),t._v(" struct provides a property, "),e("code",[t._v("value")]),t._v(", as well as methods for changing the value, "),e("code",[t._v("increase")]),t._v(" and "),e("code",[t._v("decrease")]),t._v(", as well as a "),e("code",[t._v("reset")]),t._v(" method. It also provides a signal, "),e("code",[t._v("hasBeenReset")]),t._v(".")]),t._v(" "),e("div",{staticClass:"language-h extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("#ifndef COUNTER_H\n#define COUNTER_H\n\n#include <qul/singleton.h>\n#include <qul/property.h>\n#include <qul/signal.h>\n\nclass Counter : public Qul::Singleton<Counter>\n{\npublic:\n    Counter();\n\n    Qul::Property<int> value;\n\n    void increase();\n    void decrease();\n\n    void reset();\n    Qul::Signal<void(void)> hasBeenReset;\n\n};\n\n#endif // COUNTER_H")])])]),e("p",[t._v("Coming from Qt, this looks odd. This is where Qt for MCUs shows the main differences. There is no "),e("code",[t._v("QObject")]),t._v(" base class or "),e("code",[t._v("Q_OBJECT")]),t._v(" macro, instead a new set of classes from the "),e("code",[t._v("Qul")]),t._v(" is used. In this particular case, the base class is the "),e("code",[t._v("Qul::Singleton")]),t._v(" class, creating a globally accessible singleton in the QML world. We also use the "),e("code",[t._v("Qul::Signal")]),t._v(" class to create a signal and the "),e("code",[t._v("Qul::Property")]),t._v(" class to create a property. All public, non-overloaded member functions are exposed to QML automatically.")]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("p",[t._v("To create an element that can be instantiated from QML, instead of a singleton, use the "),e("code",[t._v("Qul::Object")]),t._v(" base class.")])]),t._v(" "),e("p",[t._v("The struct is then exposed to QML using the CMake macro "),e("code",[t._v("qul_target_generate_interfaces")]),t._v(". Below you can see the "),e("code",[t._v("CMakeLists.txt")]),t._v(", based on the file generated by Qt Creator, with the "),e("code",[t._v("counter.h")]),t._v(" and "),e("code",[t._v("counter.cpp")]),t._v(" files added.")]),t._v(" "),e("div",{staticClass:"language-txt extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("qul_target_generate_interfaces(cppintegration counter.h)")])])]),e("p",[t._v("Now, let's continue with the implementation of the "),e("code",[t._v("Counter")]),t._v(" struct. First up, for the "),e("code",[t._v("value")]),t._v(" property, we use the "),e("code",[t._v("value")]),t._v(" and "),e("code",[t._v("setValue")]),t._v(" functions to access and modify the actual value. In our case, the property holds and "),e("code",[t._v("int")]),t._v(", but just as for the ordinary QML engine, types are "),e("a",{attrs:{href:"https://doc.qt.io/QtForMCUs/qtul-integratecppqml.html#type-mapping",target:"_blank",rel:"noopener noreferrer"}},[t._v("mapped between C++ and QML"),e("OutboundLink")],1),t._v(".")]),t._v(" "),e("p",[t._v("This is used in the constructor, shown below, that sets the initial value to zero.")]),t._v(" "),e("div",{staticClass:"language-cpp extra-class"},[e("pre",{pre:!0,attrs:{class:"language-cpp"}},[e("code",[e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Counter")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("Counter")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    value"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("setValue")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])])])]),e("p",[t._v("The "),e("code",[t._v("increase")]),t._v(" and "),e("code",[t._v("decrease")]),t._v(" functions look similar. They use the getter and setter instead of interacting directly with the value.")]),t._v(" "),e("div",{staticClass:"language-cpp extra-class"},[e("pre",{pre:!0,attrs:{class:"language-cpp"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Counter")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("increase")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    value"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("setValue")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("value"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("value")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Counter")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("decrease")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    value"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("setValue")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("value"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("value")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])])])]),e("p",[e("code",[t._v("Counter")]),t._v(" also has a signal. The signal is represented by the "),e("code",[t._v("Qul::Signal")]),t._v(" instance named "),e("code",[t._v("hasReset")]),t._v(". The signal takes a function signature as template argument, so to create a signal carrying an integer, create a "),e("code",[t._v("Qul::Signal<void(int)>")]),t._v(". In this case, the signal does not carry any values, so it is defined as a "),e("code",[t._v("void(void)")]),t._v(". To emit the signal, we simply call it as if it was an ordinary function as shown in the "),e("code",[t._v("reset")]),t._v(" function below.")]),t._v(" "),e("div",{staticClass:"language-cpp extra-class"},[e("pre",{pre:!0,attrs:{class:"language-cpp"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Counter")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("reset")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    std"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),t._v("cout "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<<")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Resetting from "')]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<<")]),t._v(" value"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("value")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<<")]),t._v(" std"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),t._v("endl"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    value"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("setValue")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("hasBeenReset")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])])])]),e("h2",{attrs:{id:"the-qml"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#the-qml"}},[t._v("#")]),t._v(" The QML")]),t._v(" "),e("p",[t._v("The QML code produces the simple user interface shown below.")]),t._v(" "),e("p",[e("img",{attrs:{src:s(343),alt:""}})]),t._v(" "),e("p",[t._v("We will look at the UI in three parts. First, the basic structure, and bindings to "),e("code",[t._v("Counter.value")]),t._v(":")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("import QtQuick\n\nRectangle {\n    width: 480\n    height: 272\n\n    Column {\n        // Left buttons goes here\n    }\n\n    Column {\n        // Right buttons goes here\n    }\n\n    Text {\n        anchors.centerIn: parent\n        text: Counter.value;\n    }\n}\n")])])]),e("p",[t._v("As you can tell, the "),e("code",[t._v("Text")]),t._v(" element's "),e("code",[t._v("text")]),t._v(" property is bound to the "),e("code",[t._v("Counter.value")]),t._v(" as in all QML.")]),t._v(" "),e("p",[t._v("Now, let's look at the left side buttons. These are used to invoke the C++ methods provided via the "),e("code",[t._v("Counter")]),t._v(" singleton. The "),e("code",[t._v("PlainButton")]),t._v(" is a QML element that we use to create these simple buttons. It lets you set the text, background color and a handler for the "),e("code",[t._v("clicked")]),t._v(" signal. As you can tell, each button calls the corresponding method on the "),e("code",[t._v("Counter")]),t._v(" singleton.")]),t._v(" "),e("div",{staticClass:"language-qml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-qml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Column")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v("x")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token javascript-expression language-javascript"}},[e("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")])]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v("y")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token javascript-expression language-javascript"}},[e("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")])]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v("spacing")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token javascript-expression language-javascript"}},[e("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")])]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("PlainButton")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v("text")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token javascript-expression language-javascript"}},[e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"+"')])]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v("onClicked")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token javascript-expression language-javascript"}},[t._v("Counter"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("increase")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")])]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("PlainButton")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v("text")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token javascript-expression language-javascript"}},[e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"reset"')])]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v("onClicked")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token javascript-expression language-javascript"}},[t._v("Counter"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("reset")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")])]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("PlainButton")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v("text")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token javascript-expression language-javascript"}},[e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"-"')])]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v("onClicked")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token javascript-expression language-javascript"}},[t._v("Counter"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("decrease")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")])]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])])])]),e("p",[t._v("The buttons on the right modify the "),e("code",[t._v("Counter.value")]),t._v(" directly from QML. This is possible to do, but invisible to C++. There is no simple way for C++ to monitor if a property has changed, so if a C++ reaction is needed, it is recommended to use a setter method, rather than directly modifying the property value.")]),t._v(" "),e("div",{staticClass:"language-qml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-qml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Column")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v("x")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token javascript-expression language-javascript"}},[e("span",{pre:!0,attrs:{class:"token number"}},[t._v("350")])]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v("y")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token javascript-expression language-javascript"}},[e("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")])]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v("spacing")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token javascript-expression language-javascript"}},[e("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")])]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("PlainButton")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v("color")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token javascript-expression language-javascript"}},[e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"orange"')])]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v("text")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token javascript-expression language-javascript"}},[e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"++"')])]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v("onClicked")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token javascript-expression language-javascript"}},[t._v("Counter"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("PlainButton")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v("color")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token javascript-expression language-javascript"}},[e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"orange"')])]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v("text")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token javascript-expression language-javascript"}},[e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"100"')])]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v("onClicked")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token javascript-expression language-javascript"}},[t._v("Counter"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("PlainButton")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v("color")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token javascript-expression language-javascript"}},[e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"orange"')])]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v("text")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token javascript-expression language-javascript"}},[e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"--"')])]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v("onClicked")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token javascript-expression language-javascript"}},[t._v("Counter"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])])])]),e("p",[t._v("This shows how to provide a singleton from C++ and how to make function calls, emit signals, and share state (properties) between C++ and QML.")]),t._v(" "),e("h2",{attrs:{id:"revisiting-the-cmake-file"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#revisiting-the-cmake-file"}},[t._v("#")]),t._v(" Revisiting the CMake file")]),t._v(" "),e("p",[t._v("The "),e("code",[t._v("CMakeLists.txt")]),t._v(" file may look familiar to you, but there are some tips and tricks that we need to discuss.")]),t._v(" "),e("p",[t._v("First of all, in order to expose a C++ class to QML, use the "),e("code",[t._v("qul_target_generate_interfaces")]),t._v(", e.g:")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("qul_target_generate_interfaces(cppintegration counter.h)\n")])])]),e("p",[t._v("The other half, the QML files, are added using the "),e("code",[t._v("qul_target_qml_sources")]),t._v(" macro. If you have multiple QML files, simply list them one by one as shown below:")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("qul_target_qml_sources(cppintegration cppintegration.qml PlainButton.qml)\n")])])]),e("p",[t._v("Another interesting aspect is that we are building a C++ project without writing a "),e("code",[t._v("main")]),t._v(" function. This is taken care of by the "),e("code",[t._v("app_target_default_main")]),t._v(" macro that adds a reference main implementation to the project. You can of course replace this with a custom "),e("code",[t._v("main")]),t._v(" function if you need more control.")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("app_target_default_main(cppintegration cppintegration)\n")])])]),e("p",[t._v("Finally, the libraries linked to are not the standard Qt ones, but the "),e("code",[t._v("Qul::")]),t._v(" ones, e.g:")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("target_link_libraries(cppintegration\n    Qul::QuickUltralite\n    Qul::QuickUltralitePlatform)\n")])])]),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("Links")]),t._v(" "),e("p",[t._v("Further reading at qt.io:")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://doc.qt.io/QtForMCUs/qtul-integratecppqml.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Integrate C++ and QML"),e("OutboundLink")],1)])])])])}),[],!1,null,null,null);a.default=n.exports}}]);