(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{406:function(s,a,t){s.exports=t.p+"assets/img/objects.82b22a70.png"},407:function(s,a,t){s.exports=t.p+"assets/img/objects_transformed.c31da1ce.png"},408:function(s,a,t){s.exports=t.p+"assets/img/objects_overlap.38fbd86e.png"},598:function(s,a,t){"use strict";t.r(a);var n=t(24),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h2",{attrs:{id:"简单变化"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#简单变化"}},[s._v("#")]),s._v(" 简单变化")]),s._v(" "),n("p",[s._v("变化操作对象的几何形状。一般来说，QML 项目可以被转换，旋转和放大缩小。这些操作有简单方式和高级方式两种。")]),s._v(" "),n("p",[s._v("让我们从简单的变化开始。这将作为我们的学习的起点。")]),s._v(" "),n("p",[s._v("简单的变化通过修改 "),n("code",[s._v("x,y")]),s._v(" 坐标来实现。旋转通过 "),n("code",[s._v("rotation")]),s._v(" 属性完成。该值的格式的角度（0.. 360）。缩小和放大通过 "),n("code",[s._v("scale")]),s._v(" 属性完成，其值 <1 意味着缩小，"),n("code",[s._v(">1")]),s._v(" 意味着放大。旋转和缩放不会修改元素的坐标和大小："),n("code",[s._v("x,y")]),s._v(" 和 "),n("code",[s._v("width/height")]),s._v(" 不会改变，仅修改了绘图指令。")]),s._v(" "),n("p",[s._v("展示例子前，先看看这个："),n("code",[s._v("ClickableImage")]),s._v(" 元素。"),n("code",[s._v("ClickableImage")]),s._v(" 是一个包含鼠标点击区域的图片。一个有用的经验法则 —— 如果一段代码重复出现三次，就将其封装为组件。")]),s._v(" "),n("div",{staticClass:"language-qml extra-class"},[n("pre",{pre:!0,attrs:{class:"language-qml"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ClickableImage.qml")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 可被点击的简单图片")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" QtQuick\n\n"),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Image")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v("id")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token javascript-expression language-javascript"}},[s._v("root")]),s._v("\n    signal clicked\n\n    "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MouseArea")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v("anchors.fill")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token javascript-expression language-javascript"}},[s._v("parent")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v("onClicked")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token javascript-expression language-javascript"}},[s._v("root"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("clicked")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")])]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")])])])]),n("p",[n("img",{attrs:{src:t(406),alt:""}})]),s._v(" "),n("p",[s._v("我们用可点击图片展示3个对象，方形，圆形和三角形。每个对象被点击时都会进行简单变化。点击背景将会重置场景。")]),s._v(" "),n("div",{staticClass:"language-qml extra-class"},[n("pre",{pre:!0,attrs:{class:"language-qml"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// TransformationExample.qml")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" QtQuick\n\n"),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Item")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 宽高设置与所给背景图相同")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v("width")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token javascript-expression language-javascript"}},[s._v("bg"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("width")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v("height")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token javascript-expression language-javascript"}},[s._v("bg"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("height")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Image")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 不错的背景图")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v("id")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token javascript-expression language-javascript"}},[s._v("bg")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v("source")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token javascript-expression language-javascript"}},[n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"assets/background.png"')])]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MouseArea")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v("id")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token javascript-expression language-javascript"}},[s._v("backgroundClicker")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 需要放在图片之前，因为错误的顺序会导致该鼠标区域在其它元素之前，消费了点击事件")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v("anchors.fill")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token javascript-expression language-javascript"}},[s._v("parent")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v("onClicked")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token javascript-expression language-javascript"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 重置小场景")]),s._v("\n            circle"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("x "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("84")]),s._v("\n            box"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("rotation "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n            triangle"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("rotation "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n            triangle"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("scale "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")])]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ClickableImage")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v("id")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token javascript-expression language-javascript"}},[s._v("circle")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v("x")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token javascript-expression language-javascript"}},[n("span",{pre:!0,attrs:{class:"token number"}},[s._v("84")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v("y")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token javascript-expression language-javascript"}},[n("span",{pre:!0,attrs:{class:"token number"}},[s._v("68")])]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v("source")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token javascript-expression language-javascript"}},[n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"assets/circle_blue.png"')])]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v("antialiasing")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token javascript-expression language-javascript"}},[n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")])]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v("onClicked")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token javascript-expression language-javascript"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 点击时增加 x 坐标")]),s._v("\n            x "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")])]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ClickableImage")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v("id")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token javascript-expression language-javascript"}},[s._v("box")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v("x")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token javascript-expression language-javascript"}},[n("span",{pre:!0,attrs:{class:"token number"}},[s._v("164")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v("y")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token javascript-expression language-javascript"}},[n("span",{pre:!0,attrs:{class:"token number"}},[s._v("68")])]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v("source")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token javascript-expression language-javascript"}},[n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"assets/box_green.png"')])]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v("antialiasing")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token javascript-expression language-javascript"}},[n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")])]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v("onClicked")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token javascript-expression language-javascript"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 点击时增加旋转角度")]),s._v("\n            rotation "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")])]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ClickableImage")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v("id")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token javascript-expression language-javascript"}},[s._v("triangle")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v("x")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token javascript-expression language-javascript"}},[n("span",{pre:!0,attrs:{class:"token number"}},[s._v("248")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v("y")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token javascript-expression language-javascript"}},[n("span",{pre:!0,attrs:{class:"token number"}},[s._v("68")])]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v("source")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token javascript-expression language-javascript"}},[n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"assets/triangle_red.png"')])]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v("antialiasing")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token javascript-expression language-javascript"}},[n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")])]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v("onClicked")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token javascript-expression language-javascript"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 多个变化")]),s._v("\n            rotation "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v("\n            scale "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.05")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")])]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    \n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ...")]),s._v("\n")])])]),n("p",[n("img",{attrs:{src:t(407),alt:""}})]),s._v(" "),n("p",[s._v("每次点击原型会增加其 x 坐标，而每次点击放行会使其旋转。每次点击三角形会触发组合变化，旋转和放大。对于放大和旋转操作，我们设置了 "),n("code",[s._v("antialiasing: true")]),s._v("，起用了因为性能原因而关闭的抗锯齿功能（与裁剪属性 "),n("code",[s._v("clip")]),s._v(" 相同）。当你在工作中看到图形里有些栅格化的边缘时，打开平滑开关可能是个不错的主意。")]),s._v(" "),n("div",{staticClass:"custom-block tip"},[n("p",{staticClass:"custom-block-title"},[s._v("提示")]),s._v(" "),n("p",[s._v("为了在缩放图片时达到更佳的显示效果，建议仅做缩小操作，不要做放大操作。使用一个较大的放大系数放大图片会导致图片模糊不清。当缩放图片时，你需要考虑使用 "),n("code",[s._v("smooth: true")]),s._v(" 牺牲性能，启用更高质量的过滤器。")])]),s._v(" "),n("p",[s._v("背景的 "),n("code",[s._v("MouseArea")]),s._v(" 覆盖了整个背景图并重置了对象状态。")]),s._v(" "),n("div",{staticClass:"custom-block tip"},[n("p",{staticClass:"custom-block-title"},[s._v("提示")]),s._v(" "),n("p",[s._v("代码中先出现的元素在堆栈中的排序（称为 z 排序）更低。如果你多次点击 "),n("code",[s._v("circle")]),s._v("，你会看到它出现在了 "),n("code",[s._v("box")]),s._v(" 之下。z 排序也可通过元素的 "),n("code",[s._v("z")]),s._v(" 属性修改。")]),s._v(" "),n("p",[n("img",{attrs:{src:t(408),alt:""}})]),s._v(" "),n("p",[s._v("这是因为在代码中，"),n("code",[s._v("box")]),s._v(" 在后面。鼠标区域也遵循相同的规则。代码中靠后的鼠标区域会与靠前的重叠，并捕捉鼠标事件。")]),s._v(" "),n("p",[s._v("请牢记："),n("em",[s._v("元素的顺序与其在文档中的顺序息息相关")]),s._v("。")])])])}),[],!1,null,null,null);a.default=e.exports}}]);