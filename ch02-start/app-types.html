<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>应用类型 | Qt 6 书籍</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="一本关于 QML 的书">
    
    <link rel="preload" href="/qt6book/assets/css/0.styles.fdf3cb50.css" as="style"><link rel="preload" href="/qt6book/assets/js/app.49f675f8.js" as="script"><link rel="preload" href="/qt6book/assets/js/2.ea318f3c.js" as="script"><link rel="preload" href="/qt6book/assets/js/82.e60a2b4d.js" as="script"><link rel="prefetch" href="/qt6book/assets/js/10.70a34b30.js"><link rel="prefetch" href="/qt6book/assets/js/100.cff7a886.js"><link rel="prefetch" href="/qt6book/assets/js/101.503e20ce.js"><link rel="prefetch" href="/qt6book/assets/js/102.395792fa.js"><link rel="prefetch" href="/qt6book/assets/js/103.071d8b78.js"><link rel="prefetch" href="/qt6book/assets/js/104.f33ee0ed.js"><link rel="prefetch" href="/qt6book/assets/js/105.bb2168fe.js"><link rel="prefetch" href="/qt6book/assets/js/106.0e951818.js"><link rel="prefetch" href="/qt6book/assets/js/107.a51bd278.js"><link rel="prefetch" href="/qt6book/assets/js/108.eefe809c.js"><link rel="prefetch" href="/qt6book/assets/js/109.744ac99b.js"><link rel="prefetch" href="/qt6book/assets/js/11.82909cde.js"><link rel="prefetch" href="/qt6book/assets/js/110.11ad155f.js"><link rel="prefetch" href="/qt6book/assets/js/111.56537df6.js"><link rel="prefetch" href="/qt6book/assets/js/112.628464f9.js"><link rel="prefetch" href="/qt6book/assets/js/113.893d1439.js"><link rel="prefetch" href="/qt6book/assets/js/114.c00f3590.js"><link rel="prefetch" href="/qt6book/assets/js/115.319d8826.js"><link rel="prefetch" href="/qt6book/assets/js/116.a36dfadb.js"><link rel="prefetch" href="/qt6book/assets/js/117.24dc552e.js"><link rel="prefetch" href="/qt6book/assets/js/118.8bc8de4e.js"><link rel="prefetch" href="/qt6book/assets/js/119.bb5fbbd6.js"><link rel="prefetch" href="/qt6book/assets/js/12.7c20b914.js"><link rel="prefetch" href="/qt6book/assets/js/120.63c90b9f.js"><link rel="prefetch" href="/qt6book/assets/js/121.64979c23.js"><link rel="prefetch" href="/qt6book/assets/js/122.410ce3c2.js"><link rel="prefetch" href="/qt6book/assets/js/123.3ceaa95e.js"><link rel="prefetch" href="/qt6book/assets/js/124.78e05194.js"><link rel="prefetch" href="/qt6book/assets/js/125.6d9b2679.js"><link rel="prefetch" href="/qt6book/assets/js/126.77bf1e01.js"><link rel="prefetch" href="/qt6book/assets/js/127.d3b82f75.js"><link rel="prefetch" href="/qt6book/assets/js/128.9d705e68.js"><link rel="prefetch" href="/qt6book/assets/js/129.37f588a9.js"><link rel="prefetch" href="/qt6book/assets/js/13.44fdf993.js"><link rel="prefetch" href="/qt6book/assets/js/130.93765866.js"><link rel="prefetch" href="/qt6book/assets/js/131.12d0d18e.js"><link rel="prefetch" href="/qt6book/assets/js/132.f488195c.js"><link rel="prefetch" href="/qt6book/assets/js/133.6ef1565d.js"><link rel="prefetch" href="/qt6book/assets/js/134.f3e8c361.js"><link rel="prefetch" href="/qt6book/assets/js/135.b397c9b2.js"><link rel="prefetch" href="/qt6book/assets/js/136.7da1e551.js"><link rel="prefetch" href="/qt6book/assets/js/137.357076e2.js"><link rel="prefetch" href="/qt6book/assets/js/138.42b20678.js"><link rel="prefetch" href="/qt6book/assets/js/139.21e63093.js"><link rel="prefetch" href="/qt6book/assets/js/14.b10bffa3.js"><link rel="prefetch" href="/qt6book/assets/js/140.dfcc4732.js"><link rel="prefetch" href="/qt6book/assets/js/141.6317fc32.js"><link rel="prefetch" href="/qt6book/assets/js/142.288153ef.js"><link rel="prefetch" href="/qt6book/assets/js/143.4eff9ad0.js"><link rel="prefetch" href="/qt6book/assets/js/144.39149a0f.js"><link rel="prefetch" href="/qt6book/assets/js/145.ce392d81.js"><link rel="prefetch" href="/qt6book/assets/js/15.f918e179.js"><link rel="prefetch" href="/qt6book/assets/js/16.5d3c40fb.js"><link rel="prefetch" href="/qt6book/assets/js/17.2614a8fe.js"><link rel="prefetch" href="/qt6book/assets/js/18.b8e87e84.js"><link rel="prefetch" href="/qt6book/assets/js/19.cb8358b7.js"><link rel="prefetch" href="/qt6book/assets/js/20.a509c2f7.js"><link rel="prefetch" href="/qt6book/assets/js/21.fac41553.js"><link rel="prefetch" href="/qt6book/assets/js/22.b8bb6616.js"><link rel="prefetch" href="/qt6book/assets/js/23.ec36efe8.js"><link rel="prefetch" href="/qt6book/assets/js/24.a38239b6.js"><link rel="prefetch" href="/qt6book/assets/js/25.6ec5c6a5.js"><link rel="prefetch" href="/qt6book/assets/js/26.3f43459b.js"><link rel="prefetch" href="/qt6book/assets/js/27.b4de3c2a.js"><link rel="prefetch" href="/qt6book/assets/js/28.3d1a74fb.js"><link rel="prefetch" href="/qt6book/assets/js/29.0e1f197c.js"><link rel="prefetch" href="/qt6book/assets/js/3.112743a2.js"><link rel="prefetch" href="/qt6book/assets/js/30.69e1ba2b.js"><link rel="prefetch" href="/qt6book/assets/js/31.180e6ae8.js"><link rel="prefetch" href="/qt6book/assets/js/32.95f52d7a.js"><link rel="prefetch" href="/qt6book/assets/js/33.19531560.js"><link rel="prefetch" href="/qt6book/assets/js/34.1b2d9f18.js"><link rel="prefetch" href="/qt6book/assets/js/35.10c030c6.js"><link rel="prefetch" href="/qt6book/assets/js/36.51dde79c.js"><link rel="prefetch" href="/qt6book/assets/js/37.f955e155.js"><link rel="prefetch" href="/qt6book/assets/js/38.c5b68607.js"><link rel="prefetch" href="/qt6book/assets/js/39.28538ce3.js"><link rel="prefetch" href="/qt6book/assets/js/4.6ee77bf2.js"><link rel="prefetch" href="/qt6book/assets/js/40.c0ad21c1.js"><link rel="prefetch" href="/qt6book/assets/js/41.105e2872.js"><link rel="prefetch" href="/qt6book/assets/js/42.55911116.js"><link rel="prefetch" href="/qt6book/assets/js/43.8e441a9e.js"><link rel="prefetch" href="/qt6book/assets/js/44.35b2ff29.js"><link rel="prefetch" href="/qt6book/assets/js/45.7d1d010c.js"><link rel="prefetch" href="/qt6book/assets/js/46.7585557d.js"><link rel="prefetch" href="/qt6book/assets/js/47.450265aa.js"><link rel="prefetch" href="/qt6book/assets/js/48.f236e58d.js"><link rel="prefetch" href="/qt6book/assets/js/49.85eb3fbd.js"><link rel="prefetch" href="/qt6book/assets/js/5.c6d72f08.js"><link rel="prefetch" href="/qt6book/assets/js/50.0196025d.js"><link rel="prefetch" href="/qt6book/assets/js/51.1a5823e9.js"><link rel="prefetch" href="/qt6book/assets/js/52.83e09db4.js"><link rel="prefetch" href="/qt6book/assets/js/53.dedb04ac.js"><link rel="prefetch" href="/qt6book/assets/js/54.80561be2.js"><link rel="prefetch" href="/qt6book/assets/js/55.d2a21221.js"><link rel="prefetch" href="/qt6book/assets/js/56.564ff842.js"><link rel="prefetch" href="/qt6book/assets/js/57.757d907a.js"><link rel="prefetch" href="/qt6book/assets/js/58.50225fe8.js"><link rel="prefetch" href="/qt6book/assets/js/59.9e233383.js"><link rel="prefetch" href="/qt6book/assets/js/6.381344fb.js"><link rel="prefetch" href="/qt6book/assets/js/60.04d29815.js"><link rel="prefetch" href="/qt6book/assets/js/61.0c74ecb4.js"><link rel="prefetch" href="/qt6book/assets/js/62.d5c85dcf.js"><link rel="prefetch" href="/qt6book/assets/js/63.8775d8a6.js"><link rel="prefetch" href="/qt6book/assets/js/64.d6548a41.js"><link rel="prefetch" href="/qt6book/assets/js/65.9ab78926.js"><link rel="prefetch" href="/qt6book/assets/js/66.cd7855b2.js"><link rel="prefetch" href="/qt6book/assets/js/67.1ff5900b.js"><link rel="prefetch" href="/qt6book/assets/js/68.74f0245e.js"><link rel="prefetch" href="/qt6book/assets/js/69.1b2e800d.js"><link rel="prefetch" href="/qt6book/assets/js/7.53dffc97.js"><link rel="prefetch" href="/qt6book/assets/js/70.19fafa64.js"><link rel="prefetch" href="/qt6book/assets/js/71.aca6355b.js"><link rel="prefetch" href="/qt6book/assets/js/72.1a3808cd.js"><link rel="prefetch" href="/qt6book/assets/js/73.de73d4a5.js"><link rel="prefetch" href="/qt6book/assets/js/74.4f6fdc1a.js"><link rel="prefetch" href="/qt6book/assets/js/75.fa040cbb.js"><link rel="prefetch" href="/qt6book/assets/js/76.c943dcfb.js"><link rel="prefetch" href="/qt6book/assets/js/77.5e5240a0.js"><link rel="prefetch" href="/qt6book/assets/js/78.4352cfdb.js"><link rel="prefetch" href="/qt6book/assets/js/79.64132667.js"><link rel="prefetch" href="/qt6book/assets/js/8.a29b933c.js"><link rel="prefetch" href="/qt6book/assets/js/80.99cf0f52.js"><link rel="prefetch" href="/qt6book/assets/js/81.8dc9b0d5.js"><link rel="prefetch" href="/qt6book/assets/js/83.ff48a41f.js"><link rel="prefetch" href="/qt6book/assets/js/84.72db517a.js"><link rel="prefetch" href="/qt6book/assets/js/85.876eef38.js"><link rel="prefetch" href="/qt6book/assets/js/86.5ed4ad32.js"><link rel="prefetch" href="/qt6book/assets/js/87.8df5143a.js"><link rel="prefetch" href="/qt6book/assets/js/88.94bf0081.js"><link rel="prefetch" href="/qt6book/assets/js/89.0272804b.js"><link rel="prefetch" href="/qt6book/assets/js/9.7436ab3c.js"><link rel="prefetch" href="/qt6book/assets/js/90.871c44c7.js"><link rel="prefetch" href="/qt6book/assets/js/91.c38e4ee7.js"><link rel="prefetch" href="/qt6book/assets/js/92.d79de636.js"><link rel="prefetch" href="/qt6book/assets/js/93.81493d9a.js"><link rel="prefetch" href="/qt6book/assets/js/94.4eef95b9.js"><link rel="prefetch" href="/qt6book/assets/js/95.3804e65e.js"><link rel="prefetch" href="/qt6book/assets/js/96.360acf76.js"><link rel="prefetch" href="/qt6book/assets/js/97.6a742d1c.js"><link rel="prefetch" href="/qt6book/assets/js/98.7e121e3a.js"><link rel="prefetch" href="/qt6book/assets/js/99.86b18043.js">
    <link rel="stylesheet" href="/qt6book/assets/css/0.styles.fdf3cb50.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/qt6book/" class="home-link router-link-active"><!----> <span class="site-name">Qt 6 书籍</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"> <a href="https://github.com/dogifyc/qt6book" target="_blank" rel="noopener noreferrer" class="repo-link">
    Contribute!
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/dogifyc/qt6book" target="_blank" rel="noopener noreferrer" class="repo-link">
    Contribute!
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><a href="/qt6book/preface/preface" class="sidebar-heading clickable"><span>前言</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/qt6book/preface/preface.html" class="sidebar-link">欢迎！</a></li><li><a href="/qt6book/preface/acknowledgements.html" class="sidebar-link">鸣谢</a></li><li><a href="/qt6book/preface/authors.html" class="sidebar-link">作者</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/qt6book/ch01-meetqt/meet-qt" class="sidebar-heading clickable"><span>遇见 Qt</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/qt6book/ch01-meetqt/meet-qt.html" class="sidebar-link">Qt 和 Qt Quick</a></li><li><a href="/qt6book/ch01-meetqt/blocks.html" class="sidebar-link">Qt 构成</a></li><li><a href="/qt6book/ch01-meetqt/intro.html" class="sidebar-link">Qt 6 简介</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/qt6book/ch02-start/quick-start" class="sidebar-heading clickable open"><span>起步</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/qt6book/ch02-start/quick-start.html" class="sidebar-link">快速开始</a></li><li><a href="/qt6book/ch02-start/install.html" class="sidebar-link">安装 Qt 6 SDK</a></li><li><a href="/qt6book/ch02-start/hello-world.html" class="sidebar-link">Hello World</a></li><li><a href="/qt6book/ch02-start/app-types.html" aria-current="page" class="active sidebar-link">应用类型</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/qt6book/ch02-start/app-types.html#控制台应用" class="sidebar-link">控制台应用</a></li><li class="sidebar-sub-header"><a href="/qt6book/ch02-start/app-types.html#c-界面应用" class="sidebar-link">C++ 界面应用</a></li><li class="sidebar-sub-header"><a href="/qt6book/ch02-start/app-types.html#动态数据" class="sidebar-link">动态数据</a></li><li class="sidebar-sub-header"><a href="/qt6book/ch02-start/app-types.html#qt-quick-应用" class="sidebar-link">Qt Quick 应用</a></li></ul></li><li><a href="/qt6book/ch02-start/summary.html" class="sidebar-link">摘要</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/qt6book/ch03-qtcreator/qt-creator" class="sidebar-heading clickable"><span>Qt Creator IDE</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/qt6book/ch03-qtcreator/qt-creator.html" class="sidebar-link">Qt Creator IDE</a></li><li><a href="/qt6book/ch03-qtcreator/user-interface.html" class="sidebar-link">用户界面</a></li><li><a href="/qt6book/ch03-qtcreator/kit-registry.html" class="sidebar-link">注册 Qt 套件</a></li><li><a href="/qt6book/ch03-qtcreator/projects.html" class="sidebar-link">项目管理</a></li><li><a href="/qt6book/ch03-qtcreator/editor.html" class="sidebar-link">使用编辑器</a></li><li><a href="/qt6book/ch03-qtcreator/locator.html" class="sidebar-link">定位器</a></li><li><a href="/qt6book/ch03-qtcreator/debugging.html" class="sidebar-link">调试</a></li><li><a href="/qt6book/ch03-qtcreator/shortcuts.html" class="sidebar-link">快捷键</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/qt6book/ch04-qmlstart/quick-start" class="sidebar-heading clickable"><span>快速开始</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/qt6book/ch04-qmlstart/quick-start.html" class="sidebar-link">快速开始</a></li><li><a href="/qt6book/ch04-qmlstart/qml-syntax.html" class="sidebar-link">QML 语法</a></li><li><a href="/qt6book/ch04-qmlstart/core-elements.html" class="sidebar-link">核心元素</a></li><li><a href="/qt6book/ch04-qmlstart/components.html" class="sidebar-link">组件</a></li><li><a href="/qt6book/ch04-qmlstart/transformations.html" class="sidebar-link">简单变化</a></li><li><a href="/qt6book/ch04-qmlstart/positioning.html" class="sidebar-link">定位元素</a></li><li><a href="/qt6book/ch04-qmlstart/layout.html" class="sidebar-link">布局元素</a></li><li><a href="/qt6book/ch04-qmlstart/input.html" class="sidebar-link">输入元素</a></li><li><a href="/qt6book/ch04-qmlstart/advanced.html" class="sidebar-link">进阶技巧</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/qt6book/ch05-fluid/fluid-elements" class="sidebar-heading clickable"><span>流式元素</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/qt6book/ch05-fluid/fluid-elements.html" class="sidebar-link">流式元素</a></li><li><a href="/qt6book/ch05-fluid/animations.html" class="sidebar-link">动画</a></li><li><a href="/qt6book/ch05-fluid/states-transitions.html" class="sidebar-link">状态和过渡</a></li><li><a href="/qt6book/ch05-fluid/advanced.html" class="sidebar-link">进阶技巧</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/qt6book/ch06-controls/controls2" class="sidebar-heading clickable"><span>QtQuick Controls</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/qt6book/ch06-controls/controls2.html" class="sidebar-link">UI Controls</a></li><li><a href="/qt6book/ch06-controls/introduction.html" class="sidebar-link">Controls 简介</a></li><li><a href="/qt6book/ch06-controls/image-viewer.html" class="sidebar-link">Image 查看器</a></li><li><a href="/qt6book/ch06-controls/common-patterns.html" class="sidebar-link">Common Patterns</a></li><li><a href="/qt6book/ch06-controls/imagine-style.html" class="sidebar-link">The Imagine Style</a></li><li><a href="/qt6book/ch06-controls/summary.html" class="sidebar-link">Summary</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/qt6book/ch07-modelview/model-view" class="sidebar-heading clickable"><span>Model View</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/qt6book/ch07-modelview/model-view.html" class="sidebar-link">Model-View-Delegate</a></li><li><a href="/qt6book/ch07-modelview/concept.html" class="sidebar-link">Concept</a></li><li><a href="/qt6book/ch07-modelview/basic-models.html" class="sidebar-link">Basic Models</a></li><li><a href="/qt6book/ch07-modelview/dynamic-views.html" class="sidebar-link">Dynamic Views</a></li><li><a href="/qt6book/ch07-modelview/delegate.html" class="sidebar-link">Delegate</a></li><li><a href="/qt6book/ch07-modelview/advanced.html" class="sidebar-link">Advanced Techniques</a></li><li><a href="/qt6book/ch07-modelview/summary.html" class="sidebar-link">Summary</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/qt6book/ch08-canvas/canvas-element" class="sidebar-heading clickable"><span>Canvas</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/qt6book/ch08-canvas/canvas-element.html" class="sidebar-link">Canvas Element</a></li><li><a href="/qt6book/ch08-canvas/convenience-api.html" class="sidebar-link">Convenience API</a></li><li><a href="/qt6book/ch08-canvas/gradients.html" class="sidebar-link">Gradients</a></li><li><a href="/qt6book/ch08-canvas/shadows.html" class="sidebar-link">Shadows</a></li><li><a href="/qt6book/ch08-canvas/images.html" class="sidebar-link">Images</a></li><li><a href="/qt6book/ch08-canvas/transformation.html" class="sidebar-link">Transformation</a></li><li><a href="/qt6book/ch08-canvas/composition-modes.html" class="sidebar-link">Composition Modes</a></li><li><a href="/qt6book/ch08-canvas/pixel-buffer.html" class="sidebar-link">Pixel Buffers</a></li><li><a href="/qt6book/ch08-canvas/canvas-paint.html" class="sidebar-link">Canvas Paint</a></li><li><a href="/qt6book/ch08-canvas/port-from-html.html" class="sidebar-link">Porting from HTML5 Canvas</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/qt6book/ch09-shapes/shapes" class="sidebar-heading clickable"><span>Shapes</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/qt6book/ch09-shapes/shapes.html" class="sidebar-link">Shapes</a></li><li><a href="/qt6book/ch09-shapes/basics.html" class="sidebar-link">A Basic Shape</a></li><li><a href="/qt6book/ch09-shapes/paths.html" class="sidebar-link">Building Paths</a></li><li><a href="/qt6book/ch09-shapes/gradients.html" class="sidebar-link">Filling Shapes</a></li><li><a href="/qt6book/ch09-shapes/animations.html" class="sidebar-link">Animating Shapes</a></li><li><a href="/qt6book/ch09-shapes/summary.html" class="sidebar-link">Summary</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/qt6book/ch10-effects/effects" class="sidebar-heading clickable"><span>Effects</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/qt6book/ch10-effects/effects.html" class="sidebar-link">Effects in QML</a></li><li><a href="/qt6book/ch10-effects/particles.html" class="sidebar-link">Particle Concept</a></li><li><a href="/qt6book/ch10-effects/simple-simulation.html" class="sidebar-link">Simple Simulation</a></li><li><a href="/qt6book/ch10-effects/particle-parameters.html" class="sidebar-link">Particle Parameters</a></li><li><a href="/qt6book/ch10-effects/directed-particles.html" class="sidebar-link">Directed Particles</a></li><li><a href="/qt6book/ch10-effects/affecting-particles.html" class="sidebar-link">Affecting Particles</a></li><li><a href="/qt6book/ch10-effects/particle-groups.html" class="sidebar-link">Particle Groups</a></li><li><a href="/qt6book/ch10-effects/particle-painters.html" class="sidebar-link">Particle Painters</a></li><li><a href="/qt6book/ch10-effects/opengl-shaders.html" class="sidebar-link">Graphics Shaders</a></li><li><a href="/qt6book/ch10-effects/shader-elements.html" class="sidebar-link">Shader Elements</a></li><li><a href="/qt6book/ch10-effects/fragment-shaders.html" class="sidebar-link">Fragment Shaders</a></li><li><a href="/qt6book/ch10-effects/wave-effect.html" class="sidebar-link">Wave Effect</a></li><li><a href="/qt6book/ch10-effects/vertex-shader.html" class="sidebar-link">Vertex Shader</a></li><li><a href="/qt6book/ch10-effects/curtain-effect.html" class="sidebar-link">Curtain Effect</a></li><li><a href="/qt6book/ch10-effects/summary.html" class="sidebar-link">Summary</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/qt6book/ch11-multimedia/multimedia" class="sidebar-heading clickable"><span>Multimedia</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/qt6book/ch11-multimedia/multimedia.html" class="sidebar-link">Multimedia</a></li><li><a href="/qt6book/ch11-multimedia/playing-media.html" class="sidebar-link">Playing Media</a></li><li><a href="/qt6book/ch11-multimedia/sound-effects.html" class="sidebar-link">Sound Effects</a></li><li><a href="/qt6book/ch11-multimedia/video-streams.html" class="sidebar-link">Video Streams</a></li><li><a href="/qt6book/ch11-multimedia/capturing-images.html" class="sidebar-link">Capturing Images</a></li><li><a href="/qt6book/ch11-multimedia/summary.html" class="sidebar-link">Summary</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/qt6book/ch12-qtquick3d/intro" class="sidebar-heading clickable"><span>Qt Quick 3D</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/qt6book/ch12-qtquick3d/intro.html" class="sidebar-link">Qt Quick 3D</a></li><li><a href="/qt6book/ch12-qtquick3d/basics.html" class="sidebar-link">The Basics</a></li><li><a href="/qt6book/ch12-qtquick3d/assets.html" class="sidebar-link">Working with Assets</a></li><li><a href="/qt6book/ch12-qtquick3d/materials-and-light.html" class="sidebar-link">Materials and Light</a></li><li><a href="/qt6book/ch12-qtquick3d/animations.html" class="sidebar-link">Animations</a></li><li><a href="/qt6book/ch12-qtquick3d/mixing-2d-and-3d.html" class="sidebar-link">Mixing 2D and 3D Contents</a></li><li><a href="/qt6book/ch12-qtquick3d/summary.html" class="sidebar-link">Summary</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/qt6book/ch13-networking/networking" class="sidebar-heading clickable"><span>Networking</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/qt6book/ch13-networking/networking.html" class="sidebar-link">Networking</a></li><li><a href="/qt6book/ch13-networking/serve-qml.html" class="sidebar-link">Serving UI via HTTP</a></li><li><a href="/qt6book/ch13-networking/templates.html" class="sidebar-link">Templates</a></li><li><a href="/qt6book/ch13-networking/http-requests.html" class="sidebar-link">HTTP Requests</a></li><li><a href="/qt6book/ch13-networking/local-files.html" class="sidebar-link">Local files</a></li><li><a href="/qt6book/ch13-networking/rest-api.html" class="sidebar-link">REST API</a></li><li><a href="/qt6book/ch13-networking/authentication.html" class="sidebar-link">Authentication using OAuth</a></li><li><a href="/qt6book/ch13-networking/web-sockets.html" class="sidebar-link">Web Sockets</a></li><li><a href="/qt6book/ch13-networking/summary.html" class="sidebar-link">Summary</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/qt6book/ch14-storage/storage" class="sidebar-heading clickable"><span>Storage</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/qt6book/ch14-storage/storage.html" class="sidebar-link">Storage</a></li><li><a href="/qt6book/ch14-storage/settings.html" class="sidebar-link">Settings</a></li><li><a href="/qt6book/ch14-storage/local-storage.html" class="sidebar-link">Local Storage - SQL</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/qt6book/ch15-dynamicqml/dynamic-qml" class="sidebar-heading clickable"><span>Dynamic QML</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/qt6book/ch15-dynamicqml/dynamic-qml.html" class="sidebar-link">Dynamic QML</a></li><li><a href="/qt6book/ch15-dynamicqml/loading-components.html" class="sidebar-link">Loading Components Dynamically</a></li><li><a href="/qt6book/ch15-dynamicqml/dynamic-objects.html" class="sidebar-link">Creating and Destroying Objects</a></li><li><a href="/qt6book/ch15-dynamicqml/tracking-objects.html" class="sidebar-link">Tracking Dynamic Objects</a></li><li><a href="/qt6book/ch15-dynamicqml/summary.html" class="sidebar-link">Summary</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/qt6book/ch16-javascript/javascript" class="sidebar-heading clickable"><span>Javascript</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/qt6book/ch16-javascript/javascript.html" class="sidebar-link">JavaScript</a></li><li><a href="/qt6book/ch16-javascript/html-qml.html" class="sidebar-link">Browser/HTML vs Qt Quick/QML</a></li><li><a href="/qt6book/ch16-javascript/js-language.html" class="sidebar-link">JS Language</a></li><li><a href="/qt6book/ch16-javascript/js-objects.html" class="sidebar-link">JS Objects</a></li><li><a href="/qt6book/ch16-javascript/js-console.html" class="sidebar-link">Creating a JS Console</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/qt6book/ch17-qtcpp/qtcpp" class="sidebar-heading clickable"><span>Qt C++</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/qt6book/ch17-qtcpp/qtcpp.html" class="sidebar-link">Qt and C++</a></li><li><a href="/qt6book/ch17-qtcpp/boilerplate.html" class="sidebar-link">A Boilerplate Application</a></li><li><a href="/qt6book/ch17-qtcpp/qobject.html" class="sidebar-link">The QObject</a></li><li><a href="/qt6book/ch17-qtcpp/build-system.html" class="sidebar-link">Build Systems</a></li><li><a href="/qt6book/ch17-qtcpp/common-classes.html" class="sidebar-link">Common Qt Classes</a></li><li><a href="/qt6book/ch17-qtcpp/cpp-models.html" class="sidebar-link">Models in C++</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/qt6book/ch18-extensions/extending-qml" class="sidebar-heading clickable"><span>Extending QML</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/qt6book/ch18-extensions/extending-qml.html" class="sidebar-link">Extending QML with C++</a></li><li><a href="/qt6book/ch18-extensions/qml-runtime.html" class="sidebar-link">Understanding the QML Run-time</a></li><li><a href="/qt6book/ch18-extensions/plugin-content.html" class="sidebar-link">Plugin Content</a></li><li><a href="/qt6book/ch18-extensions/create-plugin.html" class="sidebar-link">Creating the plugin</a></li><li><a href="/qt6book/ch18-extensions/fileio-demo.html" class="sidebar-link">FileIO Implementation</a></li><li><a href="/qt6book/ch18-extensions/using-fileio.html" class="sidebar-link">Using FileIO</a></li><li><a href="/qt6book/ch18-extensions/summary.html" class="sidebar-link">Summary</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/qt6book/ch19-python/qt-python" class="sidebar-heading clickable"><span>Qt for Python</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/qt6book/ch19-python/qt-python.html" class="sidebar-link">Qt for Python</a></li><li><a href="/qt6book/ch19-python/introduction.html" class="sidebar-link">Introduction</a></li><li><a href="/qt6book/ch19-python/installing.html" class="sidebar-link">Installing</a></li><li><a href="/qt6book/ch19-python/build-app.html" class="sidebar-link">Building an Application</a></li><li><a href="/qt6book/ch19-python/limitations.html" class="sidebar-link">Limitations</a></li><li><a href="/qt6book/ch19-python/summary.html" class="sidebar-link">Summary</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/qt6book/ch20-qtformcu/qtformcu" class="sidebar-heading clickable"><span>Qt for MCUs</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/qt6book/ch20-qtformcu/qtformcu.html" class="sidebar-link">Qt for MCUs</a></li><li><a href="/qt6book/ch20-qtformcu/setup.html" class="sidebar-link">Setup</a></li><li><a href="/qt6book/ch20-qtformcu/helloworld.html" class="sidebar-link">Hello World - for MCUs</a></li><li><a href="/qt6book/ch20-qtformcu/cpp.html" class="sidebar-link">Integrating with C++</a></li><li><a href="/qt6book/ch20-qtformcu/models.html" class="sidebar-link">Working with Models</a></li><li><a href="/qt6book/ch20-qtformcu/summary.html" class="sidebar-link">Summary</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="应用类型"><a href="#应用类型" class="header-anchor">#</a> 应用类型</h1> <p>本节展示了 Qt 6 能编写的各种应用类型。Qt 6 不仅限于此处介绍的应用类型，但下面的介绍会让您更好地了解 Qt 6 能实现的应用类型。</p> <h2 id="控制台应用"><a href="#控制台应用" class="header-anchor">#</a> 控制台应用</h2> <p>控制台应用并未提供用户界面，一般作为系统服务的一部分或者从命令行调用。Qt 6 自带了一套现成的组件，它们会帮助你高效地创建跨平台控制台应用。例如，网络文件 API，字符串处理和一个高效的命令行转换器。因为 Qt 是对 C++ 的高度抽象，你可以同时获得快速开发和高速执行能力。不要认为 Qt <em>仅仅</em> 是一个 UI 套件 ———— 它能提供更多的功能。</p> <h3 id="字符串处理"><a href="#字符串处理" class="header-anchor">#</a> 字符串处理</h3> <p>第一个例子演示了如何拼接两个字符串常量。需要承认的是，这不是一个实用的应用，但是它向你展示了没有事件循环的原生 C++ 应用是啥样的。</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token comment">// 引入需要的模型和类</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QtCore&gt;</span></span>

<span class="token comment">// text stream 可识别文本编码</span>
QTextStream <span class="token function">cout</span><span class="token punctuation">(</span><span class="token constant">stdout</span><span class="token punctuation">,</span> QIODevice<span class="token operator">::</span>WriteOnly<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span><span class="token operator">*</span><span class="token operator">*</span> argv<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">// 避免编译告警</span>
    <span class="token function">Q_UNUSED</span><span class="token punctuation">(</span>argc<span class="token punctuation">)</span>
    <span class="token function">Q_UNUSED</span><span class="token punctuation">(</span>argv<span class="token punctuation">)</span>
    QString <span class="token function">s1</span><span class="token punctuation">(</span><span class="token string">&quot;Paris&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    QString <span class="token function">s2</span><span class="token punctuation">(</span><span class="token string">&quot;London&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 拼接字符串</span>
    QString s <span class="token operator">=</span> s1 <span class="token operator">+</span> <span class="token string">&quot; &quot;</span> <span class="token operator">+</span> s2 <span class="token operator">+</span> <span class="token string">&quot;!&quot;</span><span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> s <span class="token operator">&lt;&lt;</span> Qt<span class="token operator">::</span>endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="容器类"><a href="#容器类" class="header-anchor">#</a> 容器类</h3> <p>本例给应用新增了一个列表，并遍历了列表。Qt 自带了大量便于使用的容器类，它们和其它 Qt 类遵循同样的 API 规范。</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>QString <span class="token function">s1</span><span class="token punctuation">(</span><span class="token string">&quot;Hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
QString <span class="token function">s2</span><span class="token punctuation">(</span><span class="token string">&quot;Qt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
QList<span class="token operator">&lt;</span>QString<span class="token operator">&gt;</span> list<span class="token punctuation">;</span>
<span class="token comment">// 流入容器</span>
list <span class="token operator">&lt;&lt;</span> s1 <span class="token operator">&lt;&lt;</span> s2<span class="token punctuation">;</span>
<span class="token comment">// Java 和 STL 类似遍历器</span>
QListIterator<span class="token operator">&lt;</span>QString<span class="token operator">&gt;</span> <span class="token function">iter</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">while</span><span class="token punctuation">(</span>iter<span class="token punctuation">.</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> iter<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>iter<span class="token punctuation">.</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;!&quot;</span> <span class="token operator">&lt;&lt;</span> Qt<span class="token operator">::</span>endl<span class="token punctuation">;</span>
</code></pre></div><p>这里有个更高级的列表函数，这允许你将列表中的字符串拼接成一个。这在处理基于行的文本输入时，十分便利。反向处理（字符串转为字符串列表）可以通过 <code>QString::split()</code> 实现。</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>QString <span class="token function">s1</span><span class="token punctuation">(</span><span class="token string">&quot;Hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
QString <span class="token function">s2</span><span class="token punctuation">(</span><span class="token string">&quot;Qt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 方便的容器类</span>
QStringList list<span class="token punctuation">;</span>
list <span class="token operator">&lt;&lt;</span>  s1 <span class="token operator">&lt;&lt;</span> s2<span class="token punctuation">;</span>
<span class="token comment">// 拼接字符串</span>
QString s <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&quot; &quot;</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;!&quot;</span><span class="token punctuation">;</span>
cout <span class="token operator">&lt;&lt;</span> s <span class="token operator">&lt;&lt;</span> Qt<span class="token operator">::</span>endl<span class="token punctuation">;</span>
</code></pre></div><h3 id="文件-io"><a href="#文件-io" class="header-anchor">#</a> 文件 IO</h3> <p>下面的代码中，我们从本地目录读取了一个 CSV 文件，循环迭代每行，获取单元数据。我们只需 20 行左右的代码就能从 CSV 文件中获取表数据。文件返回了一个字节流，让我们能将其转成有效的 Unicode 编码的文本，需要将文件作为文本流的上级输入。要输出 CSV 文件，我们只需将文件以写入模式打开，将行依次流入该文本流。</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>QList<span class="token operator">&lt;</span>QStringList<span class="token operator">&gt;</span> data<span class="token punctuation">;</span>
<span class="token comment">// 文件操作</span>
QFile <span class="token function">file</span><span class="token punctuation">(</span><span class="token string">&quot;sample.csv&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>file<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>QIODevice<span class="token operator">::</span>ReadOnly<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    QTextStream <span class="token function">stream</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// loop forever macro</span>
    forever <span class="token punctuation">{</span>
        QString line <span class="token operator">=</span> stream<span class="token punctuation">.</span><span class="token function">readLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 判断字符串 'String()' 是否为 null</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>line<span class="token punctuation">.</span><span class="token function">isNull</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// 判断字符串 'QString(&quot;&quot;)' 是否为空</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>line<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">continue</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        QStringList row<span class="token punctuation">;</span>
        <span class="token comment">// 迭代容器内的每一行</span>
        <span class="token function">foreach</span><span class="token punctuation">(</span><span class="token keyword">const</span> QString<span class="token operator">&amp;</span> cell<span class="token punctuation">,</span> line<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;,&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            row<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>cell<span class="token punctuation">.</span><span class="token function">trimmed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        data<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>row<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 无需清理</span>
</code></pre></div><p>Qt 基于控制台的应用程序的部分到此结束。</p> <h2 id="c-界面应用"><a href="#c-界面应用" class="header-anchor">#</a> C++ 界面应用</h2> <p>控制台应用非常有用，但是有时你期望有个可视化的用户界面（GUI）。基于 GUI 的应用也需要后端代码来读取/写入文件，与网络沟通或将数据存在容器中。</p> <p>在第一个基于视图的应用的代码段中，我们用最少的代码创建了一个窗口并展示它。在 Qt 中，一个没有上级的视图组件就是窗口。我们使用范围指针确保指针在超出范围的时候会被销毁。应用对象封装了 Qt 运行时，通过调用 <code>exec()</code> 启动了事件循环。随后，应用只会响应由诸如用户输入（鼠标或键盘），其它例如网络或文件 IO 的事件提供者触发的事件。应用只会在事件循环退出后退出。这需要调用 <code>quit()</code> 或关闭窗口。</p> <p>当你运行代码时，你会看到一个 240 x 120 像素的窗口。完毕。</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>include <span class="token operator">&lt;</span>QtGui<span class="token operator">&gt;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span><span class="token operator">*</span><span class="token operator">*</span> argv<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    QApplication <span class="token function">app</span><span class="token punctuation">(</span>argc<span class="token punctuation">,</span> argv<span class="token punctuation">)</span><span class="token punctuation">;</span>
    QScopedPointer<span class="token operator">&lt;</span>QWidget<span class="token operator">&gt;</span> <span class="token function">widget</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token function">CustomWidget</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    widget<span class="token operator">-&gt;</span><span class="token function">resize</span><span class="token punctuation">(</span><span class="token number">240</span><span class="token punctuation">,</span> <span class="token number">120</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    widget<span class="token operator">-&gt;</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> app<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="自定义视图组件"><a href="#自定义视图组件" class="header-anchor">#</a> 自定义视图组件</h3> <p>当你编写用户界面时，你可能需要创建自定义视图组件。通常来说，视图组件就是一个充满绘图调用的视窗。另外，该组件内置了如何处理键盘和鼠标输入的代码，以及其它外部事件。在 Qt 中，我们要自 QWidget 派生，并重写几个用于绘图和事件处理的函数。</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">once</span></span>

include <span class="token operator">&lt;</span>QtWidgets<span class="token operator">&gt;</span>

<span class="token keyword">class</span> <span class="token class-name">CustomWidget</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">QWidget</span></span>
<span class="token punctuation">{</span>
    Q_OBJECT
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token keyword">explicit</span> <span class="token function">CustomWidget</span><span class="token punctuation">(</span>QWidget <span class="token operator">*</span>parent <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">paintEvent</span><span class="token punctuation">(</span>QPaintEvent <span class="token operator">*</span>event<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">mousePressEvent</span><span class="token punctuation">(</span>QMouseEvent <span class="token operator">*</span>event<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">mouseMoveEvent</span><span class="token punctuation">(</span>QMouseEvent <span class="token operator">*</span>event<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">private</span><span class="token operator">:</span>
    QPoint m_lastPos<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>在实现类中，我们给视图画了一个边框，且在鼠标最后的位置画了一个小矩形。这对低级自定义视图组件来说非常常见。鼠标和键盘事件修改了组件的内部装填，并触发了组件的重绘。我们不会过多介绍这份代码的细节，但是很高兴你知道这种可能性。Qt 自带了大量的预制桌面组件，你可能不需要这么做。</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>include <span class="token string">&quot;customwidget.h&quot;</span>

<span class="token class-name">CustomWidget</span><span class="token operator">::</span><span class="token function">CustomWidget</span><span class="token punctuation">(</span>QWidget <span class="token operator">*</span>parent<span class="token punctuation">)</span> <span class="token operator">:</span>
    <span class="token function">QWidget</span><span class="token punctuation">(</span>parent<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">CustomWidget</span><span class="token operator">::</span><span class="token function">paintEvent</span><span class="token punctuation">(</span>QPaintEvent <span class="token operator">*</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    QPainter <span class="token function">painter</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    QRect r1 <span class="token operator">=</span> <span class="token function">rect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">adjusted</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    painter<span class="token punctuation">.</span><span class="token function">setPen</span><span class="token punctuation">(</span><span class="token function">QColor</span><span class="token punctuation">(</span><span class="token string">&quot;#33B5E5&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    painter<span class="token punctuation">.</span><span class="token function">drawRect</span><span class="token punctuation">(</span>r1<span class="token punctuation">)</span><span class="token punctuation">;</span>

    QRect <span class="token function">r2</span><span class="token punctuation">(</span><span class="token function">QPoint</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">QSize</span><span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">,</span><span class="token number">40</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>m_lastPos<span class="token punctuation">.</span><span class="token function">isNull</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        r2<span class="token punctuation">.</span><span class="token function">moveCenter</span><span class="token punctuation">(</span>r1<span class="token punctuation">.</span><span class="token function">center</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        r2<span class="token punctuation">.</span><span class="token function">moveCenter</span><span class="token punctuation">(</span>m_lastPos<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    painter<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span>r2<span class="token punctuation">,</span> <span class="token function">QColor</span><span class="token punctuation">(</span><span class="token string">&quot;#FFBB33&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">CustomWidget</span><span class="token operator">::</span><span class="token function">mousePressEvent</span><span class="token punctuation">(</span>QMouseEvent <span class="token operator">*</span>event<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    m_lastPos <span class="token operator">=</span> event<span class="token operator">-&gt;</span><span class="token function">pos</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">CustomWidget</span><span class="token operator">::</span><span class="token function">mouseMoveEvent</span><span class="token punctuation">(</span>QMouseEvent <span class="token operator">*</span>event<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    m_lastPos <span class="token operator">=</span> event<span class="token operator">-&gt;</span><span class="token function">pos</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="桌面组件"><a href="#桌面组件" class="header-anchor">#</a> 桌面组件</h3> <p>Qt 开发者早已为你准备了一套桌面组件，这些组件在不同的操作系统上具有本地化的外观。你只需在一个将这些组件放置在一个更大的面板上即可。Qt 中的一个视图组件也可以是其它组件的容器。这通过父子关系进行关联。这意味着我们需要制作现成组件，例如按钮，复选框，单选框，列表和网格，其它视图的子组件。达到此目的的其中一种方式如下所示。</p> <p>以下是一个所谓的视图容器的头文件。</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">class</span> <span class="token class-name">CustomWidget</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">QWidget</span></span>
<span class="token punctuation">{</span>
    Q_OBJECT
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token keyword">explicit</span> <span class="token function">CustomWidget</span><span class="token punctuation">(</span>QWidget <span class="token operator">*</span>parent <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">private</span> slots<span class="token operator">:</span>
    <span class="token keyword">void</span> <span class="token function">itemClicked</span><span class="token punctuation">(</span>QListWidgetItem<span class="token operator">*</span> item<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">updateItem</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">private</span><span class="token operator">:</span>
    QListWidget <span class="token operator">*</span>m_widget<span class="token punctuation">;</span>
    QLineEdit <span class="token operator">*</span>m_edit<span class="token punctuation">;</span>
    QPushButton <span class="token operator">*</span>m_button<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>在实现中，我们使用布局来更好的排布组件。在视图尺寸变更时，布局管理器根据一些尺寸原则对组件进行重新布局。本例中有一个列表，一个行文本编辑器，一个按钮，它们垂直排布，允许用户编辑城市列表。我们用 Qt 的 <code>信号</code> 和 <code>槽</code> 来连接发送者和接收者。</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token class-name">CustomWidget</span><span class="token operator">::</span><span class="token function">CustomWidget</span><span class="token punctuation">(</span>QWidget <span class="token operator">*</span>parent<span class="token punctuation">)</span> <span class="token operator">:</span>
    <span class="token function">QWidget</span><span class="token punctuation">(</span>parent<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    QVBoxLayout <span class="token operator">*</span>layout <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QVBoxLayout</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    m_widget <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QListWidget</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    layout<span class="token operator">-&gt;</span><span class="token function">addWidget</span><span class="token punctuation">(</span>m_widget<span class="token punctuation">)</span><span class="token punctuation">;</span>

    m_edit <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QLineEdit</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    layout<span class="token operator">-&gt;</span><span class="token function">addWidget</span><span class="token punctuation">(</span>m_edit<span class="token punctuation">)</span><span class="token punctuation">;</span>

    m_button <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QPushButton</span><span class="token punctuation">(</span><span class="token string">&quot;Quit&quot;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    layout<span class="token operator">-&gt;</span><span class="token function">addWidget</span><span class="token punctuation">(</span>m_button<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setLayout</span><span class="token punctuation">(</span>layout<span class="token punctuation">)</span><span class="token punctuation">;</span>

    QStringList cities<span class="token punctuation">;</span>
    cities <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;Paris&quot;</span> <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;London&quot;</span> <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;Munich&quot;</span><span class="token punctuation">;</span>
    <span class="token function">foreach</span><span class="token punctuation">(</span><span class="token keyword">const</span> QString<span class="token operator">&amp;</span> city<span class="token punctuation">,</span> cities<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        m_widget<span class="token operator">-&gt;</span><span class="token function">addItem</span><span class="token punctuation">(</span>city<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">connect</span><span class="token punctuation">(</span>m_widget<span class="token punctuation">,</span> <span class="token function">SIGNAL</span><span class="token punctuation">(</span><span class="token function">itemClicked</span><span class="token punctuation">(</span>QListWidgetItem<span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token function">SLOT</span><span class="token punctuation">(</span><span class="token function">itemClicked</span><span class="token punctuation">(</span>QListWidgetItem<span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">connect</span><span class="token punctuation">(</span>m_edit<span class="token punctuation">,</span> <span class="token function">SIGNAL</span><span class="token punctuation">(</span><span class="token function">editingFinished</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token function">SLOT</span><span class="token punctuation">(</span><span class="token function">updateItem</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">connect</span><span class="token punctuation">(</span>m_button<span class="token punctuation">,</span> <span class="token function">SIGNAL</span><span class="token punctuation">(</span><span class="token function">clicked</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> qApp<span class="token punctuation">,</span> <span class="token function">SLOT</span><span class="token punctuation">(</span><span class="token function">quit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">CustomWidget</span><span class="token operator">::</span><span class="token function">itemClicked</span><span class="token punctuation">(</span>QListWidgetItem <span class="token operator">*</span>item<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token function">Q_ASSERT</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
    m_edit<span class="token operator">-&gt;</span><span class="token function">setText</span><span class="token punctuation">(</span>item<span class="token operator">-&gt;</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">CustomWidget</span><span class="token operator">::</span><span class="token function">updateItem</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    QListWidgetItem<span class="token operator">*</span> item <span class="token operator">=</span> m_widget<span class="token operator">-&gt;</span><span class="token function">currentItem</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        item<span class="token operator">-&gt;</span><span class="token function">setText</span><span class="token punctuation">(</span>m_edit<span class="token operator">-&gt;</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="绘制形状"><a href="#绘制形状" class="header-anchor">#</a> 绘制形状</h3> <p>一些问题更适合可视化。如果手头的问题有点像几何问题，Qt graphics 视图会是一个不错的选择。一个图形视图在一个场景中放置简单的集合图形。用户可以与这些图形进行交互，或通过算法来定位它们。要填充一个几何图形，你需要一个图形视图和一个图形场景。场景附着在视图上，且填充这几何图形。</p> <p>以下是一个短例。一个申明了视图和场景的头文件。</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">class</span> <span class="token class-name">CustomWidgetV2</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">QWidget</span></span>
<span class="token punctuation">{</span>
    Q_OBJECT
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token keyword">explicit</span> <span class="token function">CustomWidgetV2</span><span class="token punctuation">(</span>QWidget <span class="token operator">*</span>parent <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">private</span><span class="token operator">:</span>
    QGraphicsView <span class="token operator">*</span>m_view<span class="token punctuation">;</span>
    QGraphicsScene <span class="token operator">*</span>m_scene<span class="token punctuation">;</span>

<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>在实现中，场景首先附着到视图中。该视图是一个由容器组件负责布局的组件。最后，我们为场景添加了一个小矩形边框，它会在视图上渲染。</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>include <span class="token string">&quot;customwidgetv2.h&quot;</span>

<span class="token class-name">CustomWidget</span><span class="token operator">::</span><span class="token function">CustomWidget</span><span class="token punctuation">(</span>QWidget <span class="token operator">*</span>parent<span class="token punctuation">)</span> <span class="token operator">:</span>
    <span class="token function">QWidget</span><span class="token punctuation">(</span>parent<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    m_view <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QGraphicsView</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    m_scene <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QGraphicsScene</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    m_view<span class="token operator">-&gt;</span><span class="token function">setScene</span><span class="token punctuation">(</span>m_scene<span class="token punctuation">)</span><span class="token punctuation">;</span>

    QVBoxLayout <span class="token operator">*</span>layout <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QVBoxLayout</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    layout<span class="token operator">-&gt;</span><span class="token function">setMargin</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    layout<span class="token operator">-&gt;</span><span class="token function">addWidget</span><span class="token punctuation">(</span>m_view<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setLayout</span><span class="token punctuation">(</span>layout<span class="token punctuation">)</span><span class="token punctuation">;</span>

    QGraphicsItem<span class="token operator">*</span> rect1 <span class="token operator">=</span> m_scene<span class="token operator">-&gt;</span><span class="token function">addRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> Qt<span class="token operator">::</span>NoPen<span class="token punctuation">,</span> <span class="token function">QColor</span><span class="token punctuation">(</span><span class="token string">&quot;#FFBB33&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    rect1<span class="token operator">-&gt;</span><span class="token function">setFlags</span><span class="token punctuation">(</span>QGraphicsItem<span class="token operator">::</span>ItemIsFocusable<span class="token operator">|</span>QGraphicsItem<span class="token operator">::</span>ItemIsMovable<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="动态数据"><a href="#动态数据" class="header-anchor">#</a> 动态数据</h2> <p>到目前我们，我们已基本了解数据类型和如何使用组件和图形视图。在应用中，你会使用大量的结构化数据，这些数据需要被永久存储。当然，这些数据页需要被展示。为此，Qt 定义了模型。简单的模型如字符串列表模型，它填满了字符串，并挂载到列表视图上。</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>m_view <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QListView</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
m_model <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QStringListModel</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
view<span class="token operator">-&gt;</span><span class="token function">setModel</span><span class="token punctuation">(</span>m_model<span class="token punctuation">)</span><span class="token punctuation">;</span>

QList<span class="token operator">&lt;</span>QString<span class="token operator">&gt;</span> cities<span class="token punctuation">;</span>
cities <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;Munich&quot;</span> <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;Paris&quot;</span> <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;London&quot;</span><span class="token punctuation">;</span>
m_model<span class="token operator">-&gt;</span><span class="token function">setStringList</span><span class="token punctuation">(</span>cities<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>另一种受欢迎的存取数据的方式是 SQL。Qt 集成了 SQLite，同时也支持其它数据库引擎（如 MySQL 和 PostgreSQL）。首选，你需要用如下的 schema 创建数据库：</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> city <span class="token punctuation">(</span>name <span class="token keyword">TEXT</span><span class="token punctuation">,</span> country <span class="token keyword">TEXT</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> city <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">&quot;Munich&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Germany&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> city <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">&quot;Paris&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;France&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> city <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">&quot;London&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;United Kingdom&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>用使用 SQL，我们需要在 .pro 文件中添加 SQL 模块</p> <div class="language- extra-class"><pre class="language-text"><code>QT += sql
</code></pre></div><p>随后我们使用 C++ 打开数据库。首先，我们需要获取指定数据库引擎的新数据库对象。我们通过数据库对象打开数据库。对于 SQLite 来说，只需指定数据库文件的路径。Qt 提供了一些高阶数据库模型，其中有个叫表格模型。表格模型使用了一个表格标识符和一个可选的 where 子句。这个结果模型可以向前面的其它模型一样附着到一个列表视图中。</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>QSqlDatabase db <span class="token operator">=</span> <span class="token class-name">QSqlDatabase</span><span class="token operator">::</span><span class="token function">addDatabase</span><span class="token punctuation">(</span><span class="token string">&quot;QSQLITE&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
db<span class="token punctuation">.</span><span class="token function">setDatabaseName</span><span class="token punctuation">(</span><span class="token string">&quot;cities.db&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>db<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">qFatal</span><span class="token punctuation">(</span><span class="token string">&quot;unable to open database&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

m_model <span class="token operator">=</span> <span class="token function">QSqlTableModel</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
m_model<span class="token operator">-&gt;</span><span class="token function">setTable</span><span class="token punctuation">(</span><span class="token string">&quot;city&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
m_model<span class="token operator">-&gt;</span><span class="token function">setHeaderData</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> Qt<span class="token operator">::</span>Horizontal<span class="token punctuation">,</span> <span class="token string">&quot;City&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
m_model<span class="token operator">-&gt;</span><span class="token function">setHeaderData</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> Qt<span class="token operator">::</span>Horizontal<span class="token punctuation">,</span> <span class="token string">&quot;Country&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

view<span class="token operator">-&gt;</span><span class="token function">setModel</span><span class="token punctuation">(</span>m_model<span class="token punctuation">)</span><span class="token punctuation">;</span>
m_model<span class="token operator">-&gt;</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>对于进阶的模型操作，Qt 提供了一个排序文件代理模型，它允许你对模型进行排序，过滤，和转换。</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>QSortFilterProxyModel<span class="token operator">*</span> proxy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QSortFilterProxyModel</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
proxy<span class="token operator">-&gt;</span><span class="token function">setSourceModel</span><span class="token punctuation">(</span>m_model<span class="token punctuation">)</span><span class="token punctuation">;</span>
view<span class="token operator">-&gt;</span><span class="token function">setModel</span><span class="token punctuation">(</span>proxy<span class="token punctuation">)</span><span class="token punctuation">;</span>
view<span class="token operator">-&gt;</span><span class="token function">setSortingEnabled</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>过滤器作用于要被过滤的列上，且需要一个字符串过滤器参数。</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>proxy<span class="token operator">-&gt;</span><span class="token function">setFilterKeyColumn</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
proxy<span class="token operator">-&gt;</span><span class="token function">setFilterCaseSensitivity</span><span class="token punctuation">(</span>Qt<span class="token operator">::</span>CaseInsensitive<span class="token punctuation">)</span><span class="token punctuation">;</span>
proxy<span class="token operator">-&gt;</span><span class="token function">setFilterFixedString</span><span class="token punctuation">(</span>QString<span class="token punctuation">)</span>
</code></pre></div><p>过滤器代理模型比这里展示的要厉害的多。不过目前，只要记住过滤器的存在即可。</p> <p>!!! 注意</p> <div class="language- extra-class"><pre><code>以上就是 Qt 5 能够开发的各种典型应用的概述。桌面开发一直在发展，不久，移动端设备会成为新的桌面设备。移动端设备拥有一个不同的用户界面设计。它们比桌面软件要简单的多。它们专注于做一件事，且做这件事的过程很简单。动画是移动端的一种重要体验。用户界面需要让人感觉到灵动和流畅。传统的 Qt 技术不太适合这个市场。
</code></pre></div><p><em>接下来：Qt Quick 来救你</em></p> <h2 id="qt-quick-应用"><a href="#qt-quick-应用" class="header-anchor">#</a> Qt Quick 应用</h2> <p>在现代软件开发中有一个固有的冲突。用户界面比后端服务变化的快多了。在传统技术中，你需要同步开发前端和后端。当客户想要在软件开发过程中修改用户界面或在项目期间变更用户界面的理念时，会导致一些冲突。敏捷项目需要敏捷方法。</p> <p>Qt Quick 提供了一个声明式的环境，用户界面（前端）在其中以类似 HTML 的方式申明，而后端则是原生 C++ 代码。这使得你可以两全其美。</p> <p>以下是一个简单的 Qt Quick UI</p> <div class="language-qml extra-class"><pre class="language-qml"><code><span class="token keyword">import</span> QtQuick

<span class="token class-name">Rectangle</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token number">240</span></span><span class="token punctuation">;</span> <span class="token property">height</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token number">240</span></span>
    <span class="token class-name">Rectangle</span> <span class="token punctuation">{</span>
        <span class="token property">width</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token number">40</span></span><span class="token punctuation">;</span> <span class="token property">height</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token number">40</span></span>
        <span class="token property">anchors.centerIn</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">parent</span>
        <span class="token property">color</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token string">'#FFBB33'</span></span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这种声明式的语言被称为 QML，且在执行时需要一个运行时环境。Qt 提供了一个名为 <code>qml</code> 的标准运行时环境，你也可以写一个自定义的运行时环境。为此，我们需要一个快捷视图，且需要在 C++ 代码中设置这个 主 QML 文档。然后你可以显示这个用户界面。</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QtGui&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QtQml&gt;</span></span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    QGuiApplication <span class="token function">app</span><span class="token punctuation">(</span>argc<span class="token punctuation">,</span> argv<span class="token punctuation">)</span><span class="token punctuation">;</span>
    QQmlApplicationEngine <span class="token function">engine</span><span class="token punctuation">(</span><span class="token string">&quot;main.qml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> app<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>让我们回到更早的例子中。在这个例子中，我们使用了一个 C++ 的城市模型。它很适合用在我们的声明式 QML 代码中。</p> <p>为了启用这个模型，我们先编写前端代码，看看我们打算如何使用它。本例中，前端期望一个名为 <code>cityModel</code> 的模型，它可被用在列表视图中。</p> <div class="language-qml extra-class"><pre class="language-qml"><code><span class="token keyword">import</span> QtQuick

<span class="token class-name">Rectangle</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token number">240</span></span><span class="token punctuation">;</span> <span class="token property">height</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token number">120</span></span>
    <span class="token class-name">ListView</span> <span class="token punctuation">{</span>
        <span class="token property">width</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token number">180</span></span><span class="token punctuation">;</span> <span class="token property">height</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token number">120</span></span>
        <span class="token property">anchors.centerIn</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">parent</span>
        <span class="token property">model</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">cityModel</span>
        <span class="token property">delegate</span><span class="token punctuation">:</span> <span class="token class-name">Text</span> <span class="token punctuation">{</span> <span class="token property">text</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">model<span class="token punctuation">.</span>city </span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>要启用 <code>cityModel</code>，我们基本可以复用前面的模型，不过要在我们的根上下文中添加一个 context 属性。根上下文是主文档中的另一个根元素。</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>m_model <span class="token operator">=</span> <span class="token function">QSqlTableModel</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token comment">// some magic code</span>
QHash<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> QByteArray<span class="token operator">&gt;</span> roles<span class="token punctuation">;</span>
roles<span class="token punctuation">[</span>Qt<span class="token operator">::</span>UserRole<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;city&quot;</span><span class="token punctuation">;</span>
roles<span class="token punctuation">[</span>Qt<span class="token operator">::</span>UserRole<span class="token operator">+</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;country&quot;</span><span class="token punctuation">;</span>
m_model<span class="token operator">-&gt;</span><span class="token function">setRoleNames</span><span class="token punctuation">(</span>roles<span class="token punctuation">)</span><span class="token punctuation">;</span>
engine<span class="token punctuation">.</span><span class="token function">rootContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">setContextProperty</span><span class="token punctuation">(</span><span class="token string">&quot;cityModel&quot;</span><span class="token punctuation">,</span> m_model<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/dogifyc/qt6book/edit/main/docs/ch02-start/app-types.md" target="_blank" rel="noopener noreferrer">Help us improve this page!</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/qt6book/ch02-start/hello-world.html" class="prev">
        Hello World
      </a></span> <span class="next"><a href="/qt6book/ch02-start/summary.html">
        摘要
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/qt6book/assets/js/app.49f675f8.js" defer></script><script src="/qt6book/assets/js/2.ea318f3c.js" defer></script><script src="/qt6book/assets/js/82.e60a2b4d.js" defer></script>
  </body>
</html>
