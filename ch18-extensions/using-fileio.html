<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Using FileIO | Qt 6 书籍</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="一本关于 QML 的书">
    
    <link rel="preload" href="/qt6book/assets/css/0.styles.fdf3cb50.css" as="style"><link rel="preload" href="/qt6book/assets/js/app.49f675f8.js" as="script"><link rel="preload" href="/qt6book/assets/js/2.ea318f3c.js" as="script"><link rel="preload" href="/qt6book/assets/js/21.fac41553.js" as="script"><link rel="prefetch" href="/qt6book/assets/js/10.70a34b30.js"><link rel="prefetch" href="/qt6book/assets/js/100.cff7a886.js"><link rel="prefetch" href="/qt6book/assets/js/101.503e20ce.js"><link rel="prefetch" href="/qt6book/assets/js/102.395792fa.js"><link rel="prefetch" href="/qt6book/assets/js/103.071d8b78.js"><link rel="prefetch" href="/qt6book/assets/js/104.f33ee0ed.js"><link rel="prefetch" href="/qt6book/assets/js/105.bb2168fe.js"><link rel="prefetch" href="/qt6book/assets/js/106.0e951818.js"><link rel="prefetch" href="/qt6book/assets/js/107.a51bd278.js"><link rel="prefetch" href="/qt6book/assets/js/108.eefe809c.js"><link rel="prefetch" href="/qt6book/assets/js/109.744ac99b.js"><link rel="prefetch" href="/qt6book/assets/js/11.82909cde.js"><link rel="prefetch" href="/qt6book/assets/js/110.11ad155f.js"><link rel="prefetch" href="/qt6book/assets/js/111.56537df6.js"><link rel="prefetch" href="/qt6book/assets/js/112.628464f9.js"><link rel="prefetch" href="/qt6book/assets/js/113.893d1439.js"><link rel="prefetch" href="/qt6book/assets/js/114.c00f3590.js"><link rel="prefetch" href="/qt6book/assets/js/115.319d8826.js"><link rel="prefetch" href="/qt6book/assets/js/116.a36dfadb.js"><link rel="prefetch" href="/qt6book/assets/js/117.24dc552e.js"><link rel="prefetch" href="/qt6book/assets/js/118.8bc8de4e.js"><link rel="prefetch" href="/qt6book/assets/js/119.bb5fbbd6.js"><link rel="prefetch" href="/qt6book/assets/js/12.7c20b914.js"><link rel="prefetch" href="/qt6book/assets/js/120.63c90b9f.js"><link rel="prefetch" href="/qt6book/assets/js/121.64979c23.js"><link rel="prefetch" href="/qt6book/assets/js/122.410ce3c2.js"><link rel="prefetch" href="/qt6book/assets/js/123.3ceaa95e.js"><link rel="prefetch" href="/qt6book/assets/js/124.78e05194.js"><link rel="prefetch" href="/qt6book/assets/js/125.6d9b2679.js"><link rel="prefetch" href="/qt6book/assets/js/126.77bf1e01.js"><link rel="prefetch" href="/qt6book/assets/js/127.d3b82f75.js"><link rel="prefetch" href="/qt6book/assets/js/128.9d705e68.js"><link rel="prefetch" href="/qt6book/assets/js/129.37f588a9.js"><link rel="prefetch" href="/qt6book/assets/js/13.44fdf993.js"><link rel="prefetch" href="/qt6book/assets/js/130.93765866.js"><link rel="prefetch" href="/qt6book/assets/js/131.12d0d18e.js"><link rel="prefetch" href="/qt6book/assets/js/132.f488195c.js"><link rel="prefetch" href="/qt6book/assets/js/133.6ef1565d.js"><link rel="prefetch" href="/qt6book/assets/js/134.f3e8c361.js"><link rel="prefetch" href="/qt6book/assets/js/135.b397c9b2.js"><link rel="prefetch" href="/qt6book/assets/js/136.7da1e551.js"><link rel="prefetch" href="/qt6book/assets/js/137.357076e2.js"><link rel="prefetch" href="/qt6book/assets/js/138.42b20678.js"><link rel="prefetch" href="/qt6book/assets/js/139.21e63093.js"><link rel="prefetch" href="/qt6book/assets/js/14.b10bffa3.js"><link rel="prefetch" href="/qt6book/assets/js/140.dfcc4732.js"><link rel="prefetch" href="/qt6book/assets/js/141.6317fc32.js"><link rel="prefetch" href="/qt6book/assets/js/142.288153ef.js"><link rel="prefetch" href="/qt6book/assets/js/143.4eff9ad0.js"><link rel="prefetch" href="/qt6book/assets/js/144.39149a0f.js"><link rel="prefetch" href="/qt6book/assets/js/145.ce392d81.js"><link rel="prefetch" href="/qt6book/assets/js/15.f918e179.js"><link rel="prefetch" href="/qt6book/assets/js/16.5d3c40fb.js"><link rel="prefetch" href="/qt6book/assets/js/17.2614a8fe.js"><link rel="prefetch" href="/qt6book/assets/js/18.b8e87e84.js"><link rel="prefetch" href="/qt6book/assets/js/19.cb8358b7.js"><link rel="prefetch" href="/qt6book/assets/js/20.a509c2f7.js"><link rel="prefetch" href="/qt6book/assets/js/22.b8bb6616.js"><link rel="prefetch" href="/qt6book/assets/js/23.ec36efe8.js"><link rel="prefetch" href="/qt6book/assets/js/24.a38239b6.js"><link rel="prefetch" href="/qt6book/assets/js/25.6ec5c6a5.js"><link rel="prefetch" href="/qt6book/assets/js/26.3f43459b.js"><link rel="prefetch" href="/qt6book/assets/js/27.b4de3c2a.js"><link rel="prefetch" href="/qt6book/assets/js/28.3d1a74fb.js"><link rel="prefetch" href="/qt6book/assets/js/29.0e1f197c.js"><link rel="prefetch" href="/qt6book/assets/js/3.112743a2.js"><link rel="prefetch" href="/qt6book/assets/js/30.69e1ba2b.js"><link rel="prefetch" href="/qt6book/assets/js/31.180e6ae8.js"><link rel="prefetch" href="/qt6book/assets/js/32.95f52d7a.js"><link rel="prefetch" href="/qt6book/assets/js/33.19531560.js"><link rel="prefetch" href="/qt6book/assets/js/34.1b2d9f18.js"><link rel="prefetch" href="/qt6book/assets/js/35.10c030c6.js"><link rel="prefetch" href="/qt6book/assets/js/36.51dde79c.js"><link rel="prefetch" href="/qt6book/assets/js/37.f955e155.js"><link rel="prefetch" href="/qt6book/assets/js/38.c5b68607.js"><link rel="prefetch" href="/qt6book/assets/js/39.28538ce3.js"><link rel="prefetch" href="/qt6book/assets/js/4.6ee77bf2.js"><link rel="prefetch" href="/qt6book/assets/js/40.c0ad21c1.js"><link rel="prefetch" href="/qt6book/assets/js/41.105e2872.js"><link rel="prefetch" href="/qt6book/assets/js/42.55911116.js"><link rel="prefetch" href="/qt6book/assets/js/43.8e441a9e.js"><link rel="prefetch" href="/qt6book/assets/js/44.35b2ff29.js"><link rel="prefetch" href="/qt6book/assets/js/45.7d1d010c.js"><link rel="prefetch" href="/qt6book/assets/js/46.7585557d.js"><link rel="prefetch" href="/qt6book/assets/js/47.450265aa.js"><link rel="prefetch" href="/qt6book/assets/js/48.f236e58d.js"><link rel="prefetch" href="/qt6book/assets/js/49.85eb3fbd.js"><link rel="prefetch" href="/qt6book/assets/js/5.c6d72f08.js"><link rel="prefetch" href="/qt6book/assets/js/50.0196025d.js"><link rel="prefetch" href="/qt6book/assets/js/51.1a5823e9.js"><link rel="prefetch" href="/qt6book/assets/js/52.83e09db4.js"><link rel="prefetch" href="/qt6book/assets/js/53.dedb04ac.js"><link rel="prefetch" href="/qt6book/assets/js/54.80561be2.js"><link rel="prefetch" href="/qt6book/assets/js/55.d2a21221.js"><link rel="prefetch" href="/qt6book/assets/js/56.564ff842.js"><link rel="prefetch" href="/qt6book/assets/js/57.757d907a.js"><link rel="prefetch" href="/qt6book/assets/js/58.50225fe8.js"><link rel="prefetch" href="/qt6book/assets/js/59.9e233383.js"><link rel="prefetch" href="/qt6book/assets/js/6.381344fb.js"><link rel="prefetch" href="/qt6book/assets/js/60.04d29815.js"><link rel="prefetch" href="/qt6book/assets/js/61.0c74ecb4.js"><link rel="prefetch" href="/qt6book/assets/js/62.d5c85dcf.js"><link rel="prefetch" href="/qt6book/assets/js/63.8775d8a6.js"><link rel="prefetch" href="/qt6book/assets/js/64.d6548a41.js"><link rel="prefetch" href="/qt6book/assets/js/65.9ab78926.js"><link rel="prefetch" href="/qt6book/assets/js/66.cd7855b2.js"><link rel="prefetch" href="/qt6book/assets/js/67.1ff5900b.js"><link rel="prefetch" href="/qt6book/assets/js/68.74f0245e.js"><link rel="prefetch" href="/qt6book/assets/js/69.1b2e800d.js"><link rel="prefetch" href="/qt6book/assets/js/7.53dffc97.js"><link rel="prefetch" href="/qt6book/assets/js/70.19fafa64.js"><link rel="prefetch" href="/qt6book/assets/js/71.aca6355b.js"><link rel="prefetch" href="/qt6book/assets/js/72.1a3808cd.js"><link rel="prefetch" href="/qt6book/assets/js/73.de73d4a5.js"><link rel="prefetch" href="/qt6book/assets/js/74.4f6fdc1a.js"><link rel="prefetch" href="/qt6book/assets/js/75.fa040cbb.js"><link rel="prefetch" href="/qt6book/assets/js/76.c943dcfb.js"><link rel="prefetch" href="/qt6book/assets/js/77.5e5240a0.js"><link rel="prefetch" href="/qt6book/assets/js/78.4352cfdb.js"><link rel="prefetch" href="/qt6book/assets/js/79.64132667.js"><link rel="prefetch" href="/qt6book/assets/js/8.a29b933c.js"><link rel="prefetch" href="/qt6book/assets/js/80.99cf0f52.js"><link rel="prefetch" href="/qt6book/assets/js/81.8dc9b0d5.js"><link rel="prefetch" href="/qt6book/assets/js/82.e60a2b4d.js"><link rel="prefetch" href="/qt6book/assets/js/83.ff48a41f.js"><link rel="prefetch" href="/qt6book/assets/js/84.72db517a.js"><link rel="prefetch" href="/qt6book/assets/js/85.876eef38.js"><link rel="prefetch" href="/qt6book/assets/js/86.5ed4ad32.js"><link rel="prefetch" href="/qt6book/assets/js/87.8df5143a.js"><link rel="prefetch" href="/qt6book/assets/js/88.94bf0081.js"><link rel="prefetch" href="/qt6book/assets/js/89.0272804b.js"><link rel="prefetch" href="/qt6book/assets/js/9.7436ab3c.js"><link rel="prefetch" href="/qt6book/assets/js/90.871c44c7.js"><link rel="prefetch" href="/qt6book/assets/js/91.c38e4ee7.js"><link rel="prefetch" href="/qt6book/assets/js/92.d79de636.js"><link rel="prefetch" href="/qt6book/assets/js/93.81493d9a.js"><link rel="prefetch" href="/qt6book/assets/js/94.4eef95b9.js"><link rel="prefetch" href="/qt6book/assets/js/95.3804e65e.js"><link rel="prefetch" href="/qt6book/assets/js/96.360acf76.js"><link rel="prefetch" href="/qt6book/assets/js/97.6a742d1c.js"><link rel="prefetch" href="/qt6book/assets/js/98.7e121e3a.js"><link rel="prefetch" href="/qt6book/assets/js/99.86b18043.js">
    <link rel="stylesheet" href="/qt6book/assets/css/0.styles.fdf3cb50.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/qt6book/" class="home-link router-link-active"><!----> <span class="site-name">Qt 6 书籍</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"> <a href="https://github.com/dogifyc/qt6book" target="_blank" rel="noopener noreferrer" class="repo-link">
    Contribute!
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/dogifyc/qt6book" target="_blank" rel="noopener noreferrer" class="repo-link">
    Contribute!
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><a href="/qt6book/preface/preface" class="sidebar-heading clickable"><span>前言</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/qt6book/preface/preface.html" class="sidebar-link">欢迎！</a></li><li><a href="/qt6book/preface/acknowledgements.html" class="sidebar-link">鸣谢</a></li><li><a href="/qt6book/preface/authors.html" class="sidebar-link">作者</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/qt6book/ch01-meetqt/meet-qt" class="sidebar-heading clickable"><span>遇见 Qt</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/qt6book/ch01-meetqt/meet-qt.html" class="sidebar-link">Qt 和 Qt Quick</a></li><li><a href="/qt6book/ch01-meetqt/blocks.html" class="sidebar-link">Qt 构成</a></li><li><a href="/qt6book/ch01-meetqt/intro.html" class="sidebar-link">Qt 6 简介</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/qt6book/ch02-start/quick-start" class="sidebar-heading clickable"><span>起步</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/qt6book/ch02-start/quick-start.html" class="sidebar-link">快速开始</a></li><li><a href="/qt6book/ch02-start/install.html" class="sidebar-link">安装 Qt 6 SDK</a></li><li><a href="/qt6book/ch02-start/hello-world.html" class="sidebar-link">Hello World</a></li><li><a href="/qt6book/ch02-start/app-types.html" class="sidebar-link">应用类型</a></li><li><a href="/qt6book/ch02-start/summary.html" class="sidebar-link">摘要</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/qt6book/ch03-qtcreator/qt-creator" class="sidebar-heading clickable"><span>Qt Creator IDE</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/qt6book/ch03-qtcreator/qt-creator.html" class="sidebar-link">Qt Creator IDE</a></li><li><a href="/qt6book/ch03-qtcreator/user-interface.html" class="sidebar-link">用户界面</a></li><li><a href="/qt6book/ch03-qtcreator/kit-registry.html" class="sidebar-link">注册 Qt 套件</a></li><li><a href="/qt6book/ch03-qtcreator/projects.html" class="sidebar-link">项目管理</a></li><li><a href="/qt6book/ch03-qtcreator/editor.html" class="sidebar-link">使用编辑器</a></li><li><a href="/qt6book/ch03-qtcreator/locator.html" class="sidebar-link">定位器</a></li><li><a href="/qt6book/ch03-qtcreator/debugging.html" class="sidebar-link">调试</a></li><li><a href="/qt6book/ch03-qtcreator/shortcuts.html" class="sidebar-link">快捷键</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/qt6book/ch04-qmlstart/quick-start" class="sidebar-heading clickable"><span>快速开始</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/qt6book/ch04-qmlstart/quick-start.html" class="sidebar-link">快速开始</a></li><li><a href="/qt6book/ch04-qmlstart/qml-syntax.html" class="sidebar-link">QML 语法</a></li><li><a href="/qt6book/ch04-qmlstart/core-elements.html" class="sidebar-link">核心元素</a></li><li><a href="/qt6book/ch04-qmlstart/components.html" class="sidebar-link">组件</a></li><li><a href="/qt6book/ch04-qmlstart/transformations.html" class="sidebar-link">简单变化</a></li><li><a href="/qt6book/ch04-qmlstart/positioning.html" class="sidebar-link">定位元素</a></li><li><a href="/qt6book/ch04-qmlstart/layout.html" class="sidebar-link">布局元素</a></li><li><a href="/qt6book/ch04-qmlstart/input.html" class="sidebar-link">输入元素</a></li><li><a href="/qt6book/ch04-qmlstart/advanced.html" class="sidebar-link">进阶技巧</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/qt6book/ch05-fluid/fluid-elements" class="sidebar-heading clickable"><span>流式元素</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/qt6book/ch05-fluid/fluid-elements.html" class="sidebar-link">流式元素</a></li><li><a href="/qt6book/ch05-fluid/animations.html" class="sidebar-link">动画</a></li><li><a href="/qt6book/ch05-fluid/states-transitions.html" class="sidebar-link">状态和过渡</a></li><li><a href="/qt6book/ch05-fluid/advanced.html" class="sidebar-link">进阶技巧</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/qt6book/ch06-controls/controls2" class="sidebar-heading clickable"><span>QtQuick Controls</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/qt6book/ch06-controls/controls2.html" class="sidebar-link">UI Controls</a></li><li><a href="/qt6book/ch06-controls/introduction.html" class="sidebar-link">Controls 简介</a></li><li><a href="/qt6book/ch06-controls/image-viewer.html" class="sidebar-link">Image 查看器</a></li><li><a href="/qt6book/ch06-controls/common-patterns.html" class="sidebar-link">Common Patterns</a></li><li><a href="/qt6book/ch06-controls/imagine-style.html" class="sidebar-link">The Imagine Style</a></li><li><a href="/qt6book/ch06-controls/summary.html" class="sidebar-link">Summary</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/qt6book/ch07-modelview/model-view" class="sidebar-heading clickable"><span>Model View</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/qt6book/ch07-modelview/model-view.html" class="sidebar-link">Model-View-Delegate</a></li><li><a href="/qt6book/ch07-modelview/concept.html" class="sidebar-link">Concept</a></li><li><a href="/qt6book/ch07-modelview/basic-models.html" class="sidebar-link">Basic Models</a></li><li><a href="/qt6book/ch07-modelview/dynamic-views.html" class="sidebar-link">Dynamic Views</a></li><li><a href="/qt6book/ch07-modelview/delegate.html" class="sidebar-link">Delegate</a></li><li><a href="/qt6book/ch07-modelview/advanced.html" class="sidebar-link">Advanced Techniques</a></li><li><a href="/qt6book/ch07-modelview/summary.html" class="sidebar-link">Summary</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/qt6book/ch08-canvas/canvas-element" class="sidebar-heading clickable"><span>Canvas</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/qt6book/ch08-canvas/canvas-element.html" class="sidebar-link">Canvas Element</a></li><li><a href="/qt6book/ch08-canvas/convenience-api.html" class="sidebar-link">Convenience API</a></li><li><a href="/qt6book/ch08-canvas/gradients.html" class="sidebar-link">Gradients</a></li><li><a href="/qt6book/ch08-canvas/shadows.html" class="sidebar-link">Shadows</a></li><li><a href="/qt6book/ch08-canvas/images.html" class="sidebar-link">Images</a></li><li><a href="/qt6book/ch08-canvas/transformation.html" class="sidebar-link">Transformation</a></li><li><a href="/qt6book/ch08-canvas/composition-modes.html" class="sidebar-link">Composition Modes</a></li><li><a href="/qt6book/ch08-canvas/pixel-buffer.html" class="sidebar-link">Pixel Buffers</a></li><li><a href="/qt6book/ch08-canvas/canvas-paint.html" class="sidebar-link">Canvas Paint</a></li><li><a href="/qt6book/ch08-canvas/port-from-html.html" class="sidebar-link">Porting from HTML5 Canvas</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/qt6book/ch09-shapes/shapes" class="sidebar-heading clickable"><span>Shapes</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/qt6book/ch09-shapes/shapes.html" class="sidebar-link">Shapes</a></li><li><a href="/qt6book/ch09-shapes/basics.html" class="sidebar-link">A Basic Shape</a></li><li><a href="/qt6book/ch09-shapes/paths.html" class="sidebar-link">Building Paths</a></li><li><a href="/qt6book/ch09-shapes/gradients.html" class="sidebar-link">Filling Shapes</a></li><li><a href="/qt6book/ch09-shapes/animations.html" class="sidebar-link">Animating Shapes</a></li><li><a href="/qt6book/ch09-shapes/summary.html" class="sidebar-link">Summary</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/qt6book/ch10-effects/effects" class="sidebar-heading clickable"><span>Effects</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/qt6book/ch10-effects/effects.html" class="sidebar-link">Effects in QML</a></li><li><a href="/qt6book/ch10-effects/particles.html" class="sidebar-link">Particle Concept</a></li><li><a href="/qt6book/ch10-effects/simple-simulation.html" class="sidebar-link">Simple Simulation</a></li><li><a href="/qt6book/ch10-effects/particle-parameters.html" class="sidebar-link">Particle Parameters</a></li><li><a href="/qt6book/ch10-effects/directed-particles.html" class="sidebar-link">Directed Particles</a></li><li><a href="/qt6book/ch10-effects/affecting-particles.html" class="sidebar-link">Affecting Particles</a></li><li><a href="/qt6book/ch10-effects/particle-groups.html" class="sidebar-link">Particle Groups</a></li><li><a href="/qt6book/ch10-effects/particle-painters.html" class="sidebar-link">Particle Painters</a></li><li><a href="/qt6book/ch10-effects/opengl-shaders.html" class="sidebar-link">Graphics Shaders</a></li><li><a href="/qt6book/ch10-effects/shader-elements.html" class="sidebar-link">Shader Elements</a></li><li><a href="/qt6book/ch10-effects/fragment-shaders.html" class="sidebar-link">Fragment Shaders</a></li><li><a href="/qt6book/ch10-effects/wave-effect.html" class="sidebar-link">Wave Effect</a></li><li><a href="/qt6book/ch10-effects/vertex-shader.html" class="sidebar-link">Vertex Shader</a></li><li><a href="/qt6book/ch10-effects/curtain-effect.html" class="sidebar-link">Curtain Effect</a></li><li><a href="/qt6book/ch10-effects/summary.html" class="sidebar-link">Summary</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/qt6book/ch11-multimedia/multimedia" class="sidebar-heading clickable"><span>Multimedia</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/qt6book/ch11-multimedia/multimedia.html" class="sidebar-link">Multimedia</a></li><li><a href="/qt6book/ch11-multimedia/playing-media.html" class="sidebar-link">Playing Media</a></li><li><a href="/qt6book/ch11-multimedia/sound-effects.html" class="sidebar-link">Sound Effects</a></li><li><a href="/qt6book/ch11-multimedia/video-streams.html" class="sidebar-link">Video Streams</a></li><li><a href="/qt6book/ch11-multimedia/capturing-images.html" class="sidebar-link">Capturing Images</a></li><li><a href="/qt6book/ch11-multimedia/summary.html" class="sidebar-link">Summary</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/qt6book/ch12-qtquick3d/intro" class="sidebar-heading clickable"><span>Qt Quick 3D</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/qt6book/ch12-qtquick3d/intro.html" class="sidebar-link">Qt Quick 3D</a></li><li><a href="/qt6book/ch12-qtquick3d/basics.html" class="sidebar-link">The Basics</a></li><li><a href="/qt6book/ch12-qtquick3d/assets.html" class="sidebar-link">Working with Assets</a></li><li><a href="/qt6book/ch12-qtquick3d/materials-and-light.html" class="sidebar-link">Materials and Light</a></li><li><a href="/qt6book/ch12-qtquick3d/animations.html" class="sidebar-link">Animations</a></li><li><a href="/qt6book/ch12-qtquick3d/mixing-2d-and-3d.html" class="sidebar-link">Mixing 2D and 3D Contents</a></li><li><a href="/qt6book/ch12-qtquick3d/summary.html" class="sidebar-link">Summary</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/qt6book/ch13-networking/networking" class="sidebar-heading clickable"><span>Networking</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/qt6book/ch13-networking/networking.html" class="sidebar-link">Networking</a></li><li><a href="/qt6book/ch13-networking/serve-qml.html" class="sidebar-link">Serving UI via HTTP</a></li><li><a href="/qt6book/ch13-networking/templates.html" class="sidebar-link">Templates</a></li><li><a href="/qt6book/ch13-networking/http-requests.html" class="sidebar-link">HTTP Requests</a></li><li><a href="/qt6book/ch13-networking/local-files.html" class="sidebar-link">Local files</a></li><li><a href="/qt6book/ch13-networking/rest-api.html" class="sidebar-link">REST API</a></li><li><a href="/qt6book/ch13-networking/authentication.html" class="sidebar-link">Authentication using OAuth</a></li><li><a href="/qt6book/ch13-networking/web-sockets.html" class="sidebar-link">Web Sockets</a></li><li><a href="/qt6book/ch13-networking/summary.html" class="sidebar-link">Summary</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/qt6book/ch14-storage/storage" class="sidebar-heading clickable"><span>Storage</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/qt6book/ch14-storage/storage.html" class="sidebar-link">Storage</a></li><li><a href="/qt6book/ch14-storage/settings.html" class="sidebar-link">Settings</a></li><li><a href="/qt6book/ch14-storage/local-storage.html" class="sidebar-link">Local Storage - SQL</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/qt6book/ch15-dynamicqml/dynamic-qml" class="sidebar-heading clickable"><span>Dynamic QML</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/qt6book/ch15-dynamicqml/dynamic-qml.html" class="sidebar-link">Dynamic QML</a></li><li><a href="/qt6book/ch15-dynamicqml/loading-components.html" class="sidebar-link">Loading Components Dynamically</a></li><li><a href="/qt6book/ch15-dynamicqml/dynamic-objects.html" class="sidebar-link">Creating and Destroying Objects</a></li><li><a href="/qt6book/ch15-dynamicqml/tracking-objects.html" class="sidebar-link">Tracking Dynamic Objects</a></li><li><a href="/qt6book/ch15-dynamicqml/summary.html" class="sidebar-link">Summary</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/qt6book/ch16-javascript/javascript" class="sidebar-heading clickable"><span>Javascript</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/qt6book/ch16-javascript/javascript.html" class="sidebar-link">JavaScript</a></li><li><a href="/qt6book/ch16-javascript/html-qml.html" class="sidebar-link">Browser/HTML vs Qt Quick/QML</a></li><li><a href="/qt6book/ch16-javascript/js-language.html" class="sidebar-link">JS Language</a></li><li><a href="/qt6book/ch16-javascript/js-objects.html" class="sidebar-link">JS Objects</a></li><li><a href="/qt6book/ch16-javascript/js-console.html" class="sidebar-link">Creating a JS Console</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/qt6book/ch17-qtcpp/qtcpp" class="sidebar-heading clickable"><span>Qt C++</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/qt6book/ch17-qtcpp/qtcpp.html" class="sidebar-link">Qt and C++</a></li><li><a href="/qt6book/ch17-qtcpp/boilerplate.html" class="sidebar-link">A Boilerplate Application</a></li><li><a href="/qt6book/ch17-qtcpp/qobject.html" class="sidebar-link">The QObject</a></li><li><a href="/qt6book/ch17-qtcpp/build-system.html" class="sidebar-link">Build Systems</a></li><li><a href="/qt6book/ch17-qtcpp/common-classes.html" class="sidebar-link">Common Qt Classes</a></li><li><a href="/qt6book/ch17-qtcpp/cpp-models.html" class="sidebar-link">Models in C++</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/qt6book/ch18-extensions/extending-qml" class="sidebar-heading clickable open"><span>Extending QML</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/qt6book/ch18-extensions/extending-qml.html" class="sidebar-link">Extending QML with C++</a></li><li><a href="/qt6book/ch18-extensions/qml-runtime.html" class="sidebar-link">Understanding the QML Run-time</a></li><li><a href="/qt6book/ch18-extensions/plugin-content.html" class="sidebar-link">Plugin Content</a></li><li><a href="/qt6book/ch18-extensions/create-plugin.html" class="sidebar-link">Creating the plugin</a></li><li><a href="/qt6book/ch18-extensions/fileio-demo.html" class="sidebar-link">FileIO Implementation</a></li><li><a href="/qt6book/ch18-extensions/using-fileio.html" aria-current="page" class="active sidebar-link">Using FileIO</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/qt6book/ch18-extensions/using-fileio.html#the-application-window" class="sidebar-link">The Application Window</a></li><li class="sidebar-sub-header"><a href="/qt6book/ch18-extensions/using-fileio.html#using-actions" class="sidebar-link">Using Actions</a></li><li class="sidebar-sub-header"><a href="/qt6book/ch18-extensions/using-fileio.html#formatting-the-table" class="sidebar-link">Formatting the Table</a></li><li class="sidebar-sub-header"><a href="/qt6book/ch18-extensions/using-fileio.html#reading-data" class="sidebar-link">Reading Data</a></li><li class="sidebar-sub-header"><a href="/qt6book/ch18-extensions/using-fileio.html#writing-data" class="sidebar-link">Writing Data</a></li><li class="sidebar-sub-header"><a href="/qt6book/ch18-extensions/using-fileio.html#finishing-touch" class="sidebar-link">Finishing Touch</a></li></ul></li><li><a href="/qt6book/ch18-extensions/summary.html" class="sidebar-link">Summary</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/qt6book/ch19-python/qt-python" class="sidebar-heading clickable"><span>Qt for Python</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/qt6book/ch19-python/qt-python.html" class="sidebar-link">Qt for Python</a></li><li><a href="/qt6book/ch19-python/introduction.html" class="sidebar-link">Introduction</a></li><li><a href="/qt6book/ch19-python/installing.html" class="sidebar-link">Installing</a></li><li><a href="/qt6book/ch19-python/build-app.html" class="sidebar-link">Building an Application</a></li><li><a href="/qt6book/ch19-python/limitations.html" class="sidebar-link">Limitations</a></li><li><a href="/qt6book/ch19-python/summary.html" class="sidebar-link">Summary</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/qt6book/ch20-qtformcu/qtformcu" class="sidebar-heading clickable"><span>Qt for MCUs</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/qt6book/ch20-qtformcu/qtformcu.html" class="sidebar-link">Qt for MCUs</a></li><li><a href="/qt6book/ch20-qtformcu/setup.html" class="sidebar-link">Setup</a></li><li><a href="/qt6book/ch20-qtformcu/helloworld.html" class="sidebar-link">Hello World - for MCUs</a></li><li><a href="/qt6book/ch20-qtformcu/cpp.html" class="sidebar-link">Integrating with C++</a></li><li><a href="/qt6book/ch20-qtformcu/models.html" class="sidebar-link">Working with Models</a></li><li><a href="/qt6book/ch20-qtformcu/summary.html" class="sidebar-link">Summary</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="using-fileio"><a href="#using-fileio" class="header-anchor">#</a> Using FileIO</h1> <p>Now we can use our newly created file to access some data. In this example, we will some city data in a JSON format and display it in a table. We build this as two projects: one for the extension plugin (called <code>fileio</code>) which provides us a way to read and write text from a file, and the other, which displays the data in a table, (<code>CityUI</code>). The <code>CityUI</code> uses the <code>fileio</code>extension for reading and writing files.</p> <p><img src="/qt6book/assets/img/cityui_mock.6482dc5c.png" alt="image"></p> <p>JSON data is just text that is formatted in such a way that it can be converted into a valid JS object/array and back to text. We use our <code>FileIO</code> to read the JSON formatted data and convert it into a JS object using the built-in Javascript function <code>JSON.parse()</code>. The data is later used as a model for the table view. This is implemented in the read document and write document functions shown below.</p> <div class="language-qml extra-class"><pre class="language-qml"><code><span class="token class-name">FileIO</span> <span class="token punctuation">{</span>
    <span class="token property">id</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">io</span>
<span class="token punctuation">}</span>

<span class="token javascript-function language-javascript"><span class="token keyword">function</span> <span class="token function">readDocument</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    io<span class="token punctuation">.</span>source <span class="token operator">=</span> openDialog<span class="token punctuation">.</span>fileUrl
    io<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    view<span class="token punctuation">.</span>model <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>io<span class="token punctuation">.</span>text<span class="token punctuation">)</span>
<span class="token punctuation">}</span></span>

<span class="token javascript-function language-javascript"><span class="token keyword">function</span> <span class="token function">saveDocument</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> data <span class="token operator">=</span> view<span class="token punctuation">.</span>model
    io<span class="token punctuation">.</span>text <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span>
    io<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span></span></code></pre></div><p>The JSON data used in this example is in the <code>cities.json</code> file.
It contains a list of city data entries, where each entry contains interesting data about the city such as what is shown below.</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
        <span class="token property">&quot;area&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1928&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;city&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Shanghai&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;country&quot;</span><span class="token operator">:</span> <span class="token string">&quot;China&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;flag&quot;</span><span class="token operator">:</span> <span class="token string">&quot;22px-Flag_of_the_People's_Republic_of_China.svg.png&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;population&quot;</span><span class="token operator">:</span> <span class="token string">&quot;13831900&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    ...
<span class="token punctuation">]</span>
</code></pre></div><h2 id="the-application-window"><a href="#the-application-window" class="header-anchor">#</a> The Application Window</h2> <p>We use the Qt Creator <code>QtQuick Application</code> wizard to create a Qt Quick Controls 2 based application. We will not use the new QML forms as this is difficult to explain in a book, although the new forms approach with a <em>ui.qml</em> file is much more usable than previous. So you can remove/delete the forms file for now.</p> <p>The basic setup is an <code>ApplicationWindow</code> which can contain a toolbar, menubar, and status bar. We will only use the menubar to create some standard menu entries for opening and saving the document. The basic setup will just display an empty window.</p> <div class="language-qml extra-class"><pre class="language-qml"><code><span class="token keyword">import</span> QtQuick 2.5
<span class="token keyword">import</span> QtQuick.Controls 1.3
<span class="token keyword">import</span> QtQuick.Window 2.2
<span class="token keyword">import</span> QtQuick.Dialogs 1.2

<span class="token class-name">ApplicationWindow</span> <span class="token punctuation">{</span>
    <span class="token property">id</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">root</span>
    <span class="token property">title</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token function">qsTr</span><span class="token punctuation">(</span><span class="token string">&quot;City UI&quot;</span><span class="token punctuation">)</span></span>
    <span class="token property">width</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token number">640</span></span>
    <span class="token property">height</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token number">480</span></span>
    <span class="token property">visible</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token boolean">true</span></span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="using-actions"><a href="#using-actions" class="header-anchor">#</a> Using Actions</h2> <p>To better use/reuse our commands we use the QML <code>Action</code> type. This will allow us later to use the same action also for a potential toolbar. The open and save and exit actions are quite standard. The open and save action do not contain any logic yet, this we will come later. The menubar is created with a file menu and these three action entries. Additional we prepare already a file dialog, which will allow us to pick our city document later. A dialog is not visible when declared, you need to use the <code>open()</code> method to show it.</p> <div class="language-qml extra-class"><pre class="language-qml"><code><span class="token class-name">Action</span> <span class="token punctuation">{</span>
    <span class="token property">id</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">save</span>
    <span class="token property">text</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token function">qsTr</span><span class="token punctuation">(</span><span class="token string">&quot;&amp;Save&quot;</span><span class="token punctuation">)</span></span>
    <span class="token property">shortcut</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">StandardKey<span class="token punctuation">.</span>Save</span>
    <span class="token property">onTriggered</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token punctuation">{</span>
        <span class="token function">saveDocument</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span></span>
<span class="token punctuation">}</span>

<span class="token class-name">Action</span> <span class="token punctuation">{</span>
    <span class="token property">id</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">open</span>
    <span class="token property">text</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token function">qsTr</span><span class="token punctuation">(</span><span class="token string">&quot;&amp;Open&quot;</span><span class="token punctuation">)</span></span>
    <span class="token property">shortcut</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">StandardKey<span class="token punctuation">.</span>Open</span>
    <span class="token property">onTriggered</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">openDialog<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="token punctuation">}</span>

<span class="token class-name">Action</span> <span class="token punctuation">{</span>
    <span class="token property">id</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">exit</span>
    <span class="token property">text</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token function">qsTr</span><span class="token punctuation">(</span><span class="token string">&quot;E&amp;xit&quot;</span><span class="token punctuation">)</span></span>
    <span class="token property">onTriggered</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">Qt<span class="token punctuation">.</span><span class="token function">quit</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token property">menuBar</span><span class="token punctuation">:</span> <span class="token class-name">MenuBar</span> <span class="token punctuation">{</span>
    <span class="token class-name">Menu</span> <span class="token punctuation">{</span>
        <span class="token property">title</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token function">qsTr</span><span class="token punctuation">(</span><span class="token string">&quot;&amp;File&quot;</span><span class="token punctuation">)</span></span>
        <span class="token class-name">MenuItem</span> <span class="token punctuation">{</span> <span class="token property">action</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">open </span><span class="token punctuation">}</span>
        <span class="token class-name">MenuItem</span> <span class="token punctuation">{</span> <span class="token property">action</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">save </span><span class="token punctuation">}</span>
        <span class="token class-name">MenuSeparator</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
        <span class="token class-name">MenuItem</span> <span class="token punctuation">{</span> <span class="token property">action</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">exit </span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token class-name">FileDialog</span> <span class="token punctuation">{</span>
    <span class="token property">id</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">openDialog</span>
    <span class="token property">onAccepted</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token punctuation">{</span>
        root<span class="token punctuation">.</span><span class="token function">readDocument</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span></span>
<span class="token punctuation">}</span></code></pre></div><h2 id="formatting-the-table"><a href="#formatting-the-table" class="header-anchor">#</a> Formatting the Table</h2> <p>The content of the city data shall be displayed in a table. For this, we use the <code>TableView</code> control and declare 4 columns: city, country, area, population. Each column is a standard <code>TableViewColumn</code>. Later we will add columns for the flag and remove operation which will require a custom column delegate.</p> <div class="language-qml extra-class"><pre class="language-qml"><code><span class="token class-name">TableView</span> <span class="token punctuation">{</span>
    <span class="token property">id</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">view</span>
    <span class="token property">anchors.fill</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">parent</span>
    <span class="token class-name">TableViewColumn</span> <span class="token punctuation">{</span>
        <span class="token property">role</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token string">'city'</span></span>
        <span class="token property">title</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token string">&quot;City&quot;</span></span>
        <span class="token property">width</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token number">120</span></span>
    <span class="token punctuation">}</span>
    <span class="token class-name">TableViewColumn</span> <span class="token punctuation">{</span>
        <span class="token property">role</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token string">'country'</span></span>
        <span class="token property">title</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token string">&quot;Country&quot;</span></span>
        <span class="token property">width</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token number">120</span></span>
    <span class="token punctuation">}</span>
    <span class="token class-name">TableViewColumn</span> <span class="token punctuation">{</span>
        <span class="token property">role</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token string">'area'</span></span>
        <span class="token property">title</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token string">&quot;Area&quot;</span></span>
        <span class="token property">width</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token number">80</span></span>
    <span class="token punctuation">}</span>
    <span class="token class-name">TableViewColumn</span> <span class="token punctuation">{</span>
        <span class="token property">role</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token string">'population'</span></span>
        <span class="token property">title</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token string">&quot;Population&quot;</span></span>
        <span class="token property">width</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token number">80</span></span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Now the application should show you a menubar with a file menu and an empty table with 4 table headers. The next step will be to populate the table with useful data using our <em>FileIO</em> extension.</p> <p><img src="/qt6book/assets/img/cityui_empty.fe579a34.png" alt="image"></p> <p>The <code>cities.json</code> document is an array of city entries. Here is an example.</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
        <span class="token property">&quot;area&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1928&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;city&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Shanghai&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;country&quot;</span><span class="token operator">:</span> <span class="token string">&quot;China&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;flag&quot;</span><span class="token operator">:</span> <span class="token string">&quot;22px-Flag_of_the_People's_Republic_of_China.svg.png&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;population&quot;</span><span class="token operator">:</span> <span class="token string">&quot;13831900&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    ...
<span class="token punctuation">]</span>
</code></pre></div><p>Our job is it to allow the user to select the file, read it, convert it and set it onto the table view.</p> <h2 id="reading-data"><a href="#reading-data" class="header-anchor">#</a> Reading Data</h2> <p>For this we let the open action open the file dialog. When the user has selected a file the <code>onAccepted</code> method is called on the file dialog. There we call the <code>readDocument()</code> function. The <code>readDocument()</code> function sets the URL from the file dialog to our <code>FileIO</code> object and calls the <code>read()</code> method. The loaded text from <code>FileIO</code> is then parsed using the <code>JSON.parse()</code> method and the resulting object is directly set onto the table view as a model. How convenient is that?</p> <div class="language-qml extra-class"><pre class="language-qml"><code><span class="token class-name">Action</span> <span class="token punctuation">{</span>
    <span class="token property">id</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">open</span>
    ...
    <span class="token property">onTriggered</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token punctuation">{</span>
        openDialog<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span></span>
<span class="token punctuation">}</span>

...

<span class="token class-name">FileDialog</span> <span class="token punctuation">{</span>
    <span class="token property">id</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">openDialog</span>
    <span class="token property">onAccepted</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token punctuation">{</span>
        root<span class="token punctuation">.</span><span class="token function">readDocument</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span></span>
<span class="token punctuation">}</span>

<span class="token javascript-function language-javascript"><span class="token keyword">function</span> <span class="token function">readDocument</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    io<span class="token punctuation">.</span>source <span class="token operator">=</span> openDialog<span class="token punctuation">.</span>fileUrl
    io<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    view<span class="token punctuation">.</span>model <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>io<span class="token punctuation">.</span>text<span class="token punctuation">)</span>
<span class="token punctuation">}</span></span>


<span class="token class-name">FileIO</span> <span class="token punctuation">{</span>
    <span class="token property">id</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">io</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="writing-data"><a href="#writing-data" class="header-anchor">#</a> Writing Data</h2> <p>For saving the document, we hook up the “save” action to the <code>saveDocument()</code> function. The save document function takes the model from the view, which is a JS object and converts it into a string using the <code>JSON.stringify()</code> function. The resulting string is set to the text property of our <code>FileIO</code> object and we call <code>write()</code> to save the data to disk. The “null” and “4” parameters on the <code>stringify</code> function will format the resulting JSON data using indentation with 4 spaces. This is just for better reading of the saved document.</p> <div class="language-qml extra-class"><pre class="language-qml"><code><span class="token class-name">Action</span> <span class="token punctuation">{</span>
    <span class="token property">id</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">save</span>
    ...
    <span class="token property">onTriggered</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token punctuation">{</span>
        <span class="token function">saveDocument</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span></span>
<span class="token punctuation">}</span>

<span class="token javascript-function language-javascript"><span class="token keyword">function</span> <span class="token function">saveDocument</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> data <span class="token operator">=</span> view<span class="token punctuation">.</span>model
    io<span class="token punctuation">.</span>text <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span>
    io<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span></span>

<span class="token class-name">FileIO</span> <span class="token punctuation">{</span>
    <span class="token property">id</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">io</span>
<span class="token punctuation">}</span>
</code></pre></div><p>This is basically the application with reading, writing and displaying a JSON document. Think about all the time spend by writing XML readers and writers. With JSON all you need is a way to read and write a text file or send receive a text buffer.</p> <p><img src="/qt6book/assets/img/cityui_table.63642ad4.png" alt="image"></p> <h2 id="finishing-touch"><a href="#finishing-touch" class="header-anchor">#</a> Finishing Touch</h2> <p>The application is not fully ready yet. We still want to show the flags and allow the user to modify the document by removing cities from the model.</p> <p>In this example, the flag files are stored relative to the <code>main.qml</code> document in a <em>flags</em> folder. To be able to show them the table column needs to define a custom delegate for rendering the flag image.</p> <div class="language-qml extra-class"><pre class="language-qml"><code><span class="token class-name">TableViewColumn</span> <span class="token punctuation">{</span>
    <span class="token property">delegate</span><span class="token punctuation">:</span> <span class="token class-name">Item</span> <span class="token punctuation">{</span>
        <span class="token class-name">Image</span> <span class="token punctuation">{</span>
            <span class="token property">anchors.centerIn</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">parent</span>
            <span class="token property">source</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token string">'flags/'</span> <span class="token operator">+</span> styleData<span class="token punctuation">.</span>value</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token property">role</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token string">'flag'</span></span>
    <span class="token property">title</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token string">&quot;Flag&quot;</span></span>
    <span class="token property">width</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token number">40</span></span>
<span class="token punctuation">}</span>
</code></pre></div><p>That is all that is needed to show the flag. It exposes the flag property from the JS model as <code>styleData.value</code> to the delegate. The delegate then adjusts the image path to pre-pend <code>'flags/'</code> and displays it as an <code>Image</code> element.</p> <p>For removing we use a similar technique to display a remove button.</p> <div class="language-qml extra-class"><pre class="language-qml"><code><span class="token class-name">TableViewColumn</span> <span class="token punctuation">{</span>
    <span class="token property">delegate</span><span class="token punctuation">:</span> <span class="token class-name">Button</span> <span class="token punctuation">{</span>
        <span class="token property">iconSource</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token string">&quot;remove.png&quot;</span></span>
        <span class="token property">onClicked</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token punctuation">{</span>
            <span class="token keyword">var</span> data <span class="token operator">=</span> view<span class="token punctuation">.</span>model
            data<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>styleData<span class="token punctuation">.</span>row<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
            view<span class="token punctuation">.</span>model <span class="token operator">=</span> data
        <span class="token punctuation">}</span></span>
    <span class="token punctuation">}</span>
    <span class="token property">width</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token number">40</span></span>
<span class="token punctuation">}</span>
</code></pre></div><p>For the data removal operation, we get a hold on the view model and then remove one entry using the JS <code>splice</code> function. This method is available to us as the model is from the type JS array. The splice method changes the content of an array by removing existing elements and/or adding new elements.</p> <p>A JS array is unfortunately not so smart as a Qt model like the <code>QAbstractItemModel</code>, which will notify the view about row changes or data changes. The view will not show any updated data by now as it is never notified of any changes. Only when we set the data back to the view, the view recognizes there is new data and refreshes the view content. Setting the model again using <code>view.model = data</code> is a way to let the view know there was a data change.</p> <p><img src="/qt6book/assets/img/cityui_populated.86642d37.png" alt="image"></p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/dogifyc/qt6book/edit/main/docs/ch18-extensions/using-fileio.md" target="_blank" rel="noopener noreferrer">Help us improve this page!</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/qt6book/ch18-extensions/fileio-demo.html" class="prev">
        FileIO Implementation
      </a></span> <span class="next"><a href="/qt6book/ch18-extensions/summary.html">
        Summary
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/qt6book/assets/js/app.49f675f8.js" defer></script><script src="/qt6book/assets/js/2.ea318f3c.js" defer></script><script src="/qt6book/assets/js/21.fac41553.js" defer></script>
  </body>
</html>
