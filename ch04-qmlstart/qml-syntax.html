<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>QML 语法 | Qt 6 书籍</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="一本关于 QML 的书">
    
    <link rel="preload" href="/qt6book/assets/css/0.styles.fdf3cb50.css" as="style"><link rel="preload" href="/qt6book/assets/js/app.49f675f8.js" as="script"><link rel="preload" href="/qt6book/assets/js/2.ea318f3c.js" as="script"><link rel="preload" href="/qt6book/assets/js/51.1a5823e9.js" as="script"><link rel="prefetch" href="/qt6book/assets/js/10.70a34b30.js"><link rel="prefetch" href="/qt6book/assets/js/100.cff7a886.js"><link rel="prefetch" href="/qt6book/assets/js/101.503e20ce.js"><link rel="prefetch" href="/qt6book/assets/js/102.395792fa.js"><link rel="prefetch" href="/qt6book/assets/js/103.071d8b78.js"><link rel="prefetch" href="/qt6book/assets/js/104.f33ee0ed.js"><link rel="prefetch" href="/qt6book/assets/js/105.bb2168fe.js"><link rel="prefetch" href="/qt6book/assets/js/106.0e951818.js"><link rel="prefetch" href="/qt6book/assets/js/107.a51bd278.js"><link rel="prefetch" href="/qt6book/assets/js/108.eefe809c.js"><link rel="prefetch" href="/qt6book/assets/js/109.744ac99b.js"><link rel="prefetch" href="/qt6book/assets/js/11.82909cde.js"><link rel="prefetch" href="/qt6book/assets/js/110.11ad155f.js"><link rel="prefetch" href="/qt6book/assets/js/111.56537df6.js"><link rel="prefetch" href="/qt6book/assets/js/112.628464f9.js"><link rel="prefetch" href="/qt6book/assets/js/113.893d1439.js"><link rel="prefetch" href="/qt6book/assets/js/114.c00f3590.js"><link rel="prefetch" href="/qt6book/assets/js/115.319d8826.js"><link rel="prefetch" href="/qt6book/assets/js/116.a36dfadb.js"><link rel="prefetch" href="/qt6book/assets/js/117.24dc552e.js"><link rel="prefetch" href="/qt6book/assets/js/118.8bc8de4e.js"><link rel="prefetch" href="/qt6book/assets/js/119.bb5fbbd6.js"><link rel="prefetch" href="/qt6book/assets/js/12.7c20b914.js"><link rel="prefetch" href="/qt6book/assets/js/120.63c90b9f.js"><link rel="prefetch" href="/qt6book/assets/js/121.64979c23.js"><link rel="prefetch" href="/qt6book/assets/js/122.410ce3c2.js"><link rel="prefetch" href="/qt6book/assets/js/123.3ceaa95e.js"><link rel="prefetch" href="/qt6book/assets/js/124.78e05194.js"><link rel="prefetch" href="/qt6book/assets/js/125.6d9b2679.js"><link rel="prefetch" href="/qt6book/assets/js/126.77bf1e01.js"><link rel="prefetch" href="/qt6book/assets/js/127.d3b82f75.js"><link rel="prefetch" href="/qt6book/assets/js/128.9d705e68.js"><link rel="prefetch" href="/qt6book/assets/js/129.37f588a9.js"><link rel="prefetch" href="/qt6book/assets/js/13.44fdf993.js"><link rel="prefetch" href="/qt6book/assets/js/130.93765866.js"><link rel="prefetch" href="/qt6book/assets/js/131.12d0d18e.js"><link rel="prefetch" href="/qt6book/assets/js/132.f488195c.js"><link rel="prefetch" href="/qt6book/assets/js/133.6ef1565d.js"><link rel="prefetch" href="/qt6book/assets/js/134.f3e8c361.js"><link rel="prefetch" href="/qt6book/assets/js/135.b397c9b2.js"><link rel="prefetch" href="/qt6book/assets/js/136.7da1e551.js"><link rel="prefetch" href="/qt6book/assets/js/137.357076e2.js"><link rel="prefetch" href="/qt6book/assets/js/138.42b20678.js"><link rel="prefetch" href="/qt6book/assets/js/139.21e63093.js"><link rel="prefetch" href="/qt6book/assets/js/14.b10bffa3.js"><link rel="prefetch" href="/qt6book/assets/js/140.dfcc4732.js"><link rel="prefetch" href="/qt6book/assets/js/141.6317fc32.js"><link rel="prefetch" href="/qt6book/assets/js/142.288153ef.js"><link rel="prefetch" href="/qt6book/assets/js/143.4eff9ad0.js"><link rel="prefetch" href="/qt6book/assets/js/144.39149a0f.js"><link rel="prefetch" href="/qt6book/assets/js/145.ce392d81.js"><link rel="prefetch" href="/qt6book/assets/js/15.f918e179.js"><link rel="prefetch" href="/qt6book/assets/js/16.5d3c40fb.js"><link rel="prefetch" href="/qt6book/assets/js/17.2614a8fe.js"><link rel="prefetch" href="/qt6book/assets/js/18.b8e87e84.js"><link rel="prefetch" href="/qt6book/assets/js/19.cb8358b7.js"><link rel="prefetch" href="/qt6book/assets/js/20.a509c2f7.js"><link rel="prefetch" href="/qt6book/assets/js/21.fac41553.js"><link rel="prefetch" href="/qt6book/assets/js/22.b8bb6616.js"><link rel="prefetch" href="/qt6book/assets/js/23.ec36efe8.js"><link rel="prefetch" href="/qt6book/assets/js/24.a38239b6.js"><link rel="prefetch" href="/qt6book/assets/js/25.6ec5c6a5.js"><link rel="prefetch" href="/qt6book/assets/js/26.3f43459b.js"><link rel="prefetch" href="/qt6book/assets/js/27.b4de3c2a.js"><link rel="prefetch" href="/qt6book/assets/js/28.3d1a74fb.js"><link rel="prefetch" href="/qt6book/assets/js/29.0e1f197c.js"><link rel="prefetch" href="/qt6book/assets/js/3.112743a2.js"><link rel="prefetch" href="/qt6book/assets/js/30.69e1ba2b.js"><link rel="prefetch" href="/qt6book/assets/js/31.180e6ae8.js"><link rel="prefetch" href="/qt6book/assets/js/32.95f52d7a.js"><link rel="prefetch" href="/qt6book/assets/js/33.19531560.js"><link rel="prefetch" href="/qt6book/assets/js/34.1b2d9f18.js"><link rel="prefetch" href="/qt6book/assets/js/35.10c030c6.js"><link rel="prefetch" href="/qt6book/assets/js/36.51dde79c.js"><link rel="prefetch" href="/qt6book/assets/js/37.f955e155.js"><link rel="prefetch" href="/qt6book/assets/js/38.c5b68607.js"><link rel="prefetch" href="/qt6book/assets/js/39.28538ce3.js"><link rel="prefetch" href="/qt6book/assets/js/4.6ee77bf2.js"><link rel="prefetch" href="/qt6book/assets/js/40.c0ad21c1.js"><link rel="prefetch" href="/qt6book/assets/js/41.105e2872.js"><link rel="prefetch" href="/qt6book/assets/js/42.55911116.js"><link rel="prefetch" href="/qt6book/assets/js/43.8e441a9e.js"><link rel="prefetch" href="/qt6book/assets/js/44.35b2ff29.js"><link rel="prefetch" href="/qt6book/assets/js/45.7d1d010c.js"><link rel="prefetch" href="/qt6book/assets/js/46.7585557d.js"><link rel="prefetch" href="/qt6book/assets/js/47.450265aa.js"><link rel="prefetch" href="/qt6book/assets/js/48.f236e58d.js"><link rel="prefetch" href="/qt6book/assets/js/49.85eb3fbd.js"><link rel="prefetch" href="/qt6book/assets/js/5.c6d72f08.js"><link rel="prefetch" href="/qt6book/assets/js/50.0196025d.js"><link rel="prefetch" href="/qt6book/assets/js/52.83e09db4.js"><link rel="prefetch" href="/qt6book/assets/js/53.dedb04ac.js"><link rel="prefetch" href="/qt6book/assets/js/54.80561be2.js"><link rel="prefetch" href="/qt6book/assets/js/55.d2a21221.js"><link rel="prefetch" href="/qt6book/assets/js/56.564ff842.js"><link rel="prefetch" href="/qt6book/assets/js/57.757d907a.js"><link rel="prefetch" href="/qt6book/assets/js/58.50225fe8.js"><link rel="prefetch" href="/qt6book/assets/js/59.9e233383.js"><link rel="prefetch" href="/qt6book/assets/js/6.381344fb.js"><link rel="prefetch" href="/qt6book/assets/js/60.04d29815.js"><link rel="prefetch" href="/qt6book/assets/js/61.0c74ecb4.js"><link rel="prefetch" href="/qt6book/assets/js/62.d5c85dcf.js"><link rel="prefetch" href="/qt6book/assets/js/63.8775d8a6.js"><link rel="prefetch" href="/qt6book/assets/js/64.d6548a41.js"><link rel="prefetch" href="/qt6book/assets/js/65.9ab78926.js"><link rel="prefetch" href="/qt6book/assets/js/66.cd7855b2.js"><link rel="prefetch" href="/qt6book/assets/js/67.1ff5900b.js"><link rel="prefetch" href="/qt6book/assets/js/68.74f0245e.js"><link rel="prefetch" href="/qt6book/assets/js/69.1b2e800d.js"><link rel="prefetch" href="/qt6book/assets/js/7.53dffc97.js"><link rel="prefetch" href="/qt6book/assets/js/70.19fafa64.js"><link rel="prefetch" href="/qt6book/assets/js/71.aca6355b.js"><link rel="prefetch" href="/qt6book/assets/js/72.1a3808cd.js"><link rel="prefetch" href="/qt6book/assets/js/73.de73d4a5.js"><link rel="prefetch" href="/qt6book/assets/js/74.4f6fdc1a.js"><link rel="prefetch" href="/qt6book/assets/js/75.fa040cbb.js"><link rel="prefetch" href="/qt6book/assets/js/76.c943dcfb.js"><link rel="prefetch" href="/qt6book/assets/js/77.5e5240a0.js"><link rel="prefetch" href="/qt6book/assets/js/78.4352cfdb.js"><link rel="prefetch" href="/qt6book/assets/js/79.64132667.js"><link rel="prefetch" href="/qt6book/assets/js/8.a29b933c.js"><link rel="prefetch" href="/qt6book/assets/js/80.99cf0f52.js"><link rel="prefetch" href="/qt6book/assets/js/81.8dc9b0d5.js"><link rel="prefetch" href="/qt6book/assets/js/82.e60a2b4d.js"><link rel="prefetch" href="/qt6book/assets/js/83.ff48a41f.js"><link rel="prefetch" href="/qt6book/assets/js/84.72db517a.js"><link rel="prefetch" href="/qt6book/assets/js/85.876eef38.js"><link rel="prefetch" href="/qt6book/assets/js/86.5ed4ad32.js"><link rel="prefetch" href="/qt6book/assets/js/87.8df5143a.js"><link rel="prefetch" href="/qt6book/assets/js/88.94bf0081.js"><link rel="prefetch" href="/qt6book/assets/js/89.0272804b.js"><link rel="prefetch" href="/qt6book/assets/js/9.7436ab3c.js"><link rel="prefetch" href="/qt6book/assets/js/90.871c44c7.js"><link rel="prefetch" href="/qt6book/assets/js/91.c38e4ee7.js"><link rel="prefetch" href="/qt6book/assets/js/92.d79de636.js"><link rel="prefetch" href="/qt6book/assets/js/93.81493d9a.js"><link rel="prefetch" href="/qt6book/assets/js/94.4eef95b9.js"><link rel="prefetch" href="/qt6book/assets/js/95.3804e65e.js"><link rel="prefetch" href="/qt6book/assets/js/96.360acf76.js"><link rel="prefetch" href="/qt6book/assets/js/97.6a742d1c.js"><link rel="prefetch" href="/qt6book/assets/js/98.7e121e3a.js"><link rel="prefetch" href="/qt6book/assets/js/99.86b18043.js">
    <link rel="stylesheet" href="/qt6book/assets/css/0.styles.fdf3cb50.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/qt6book/" class="home-link router-link-active"><!----> <span class="site-name">Qt 6 书籍</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"> <a href="https://github.com/dogifyc/qt6book" target="_blank" rel="noopener noreferrer" class="repo-link">
    Contribute!
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/dogifyc/qt6book" target="_blank" rel="noopener noreferrer" class="repo-link">
    Contribute!
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><a href="/qt6book/preface/preface" class="sidebar-heading clickable"><span>前言</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/qt6book/preface/preface.html" class="sidebar-link">欢迎！</a></li><li><a href="/qt6book/preface/acknowledgements.html" class="sidebar-link">鸣谢</a></li><li><a href="/qt6book/preface/authors.html" class="sidebar-link">作者</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/qt6book/ch01-meetqt/meet-qt" class="sidebar-heading clickable"><span>遇见 Qt</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/qt6book/ch01-meetqt/meet-qt.html" class="sidebar-link">Qt 和 Qt Quick</a></li><li><a href="/qt6book/ch01-meetqt/blocks.html" class="sidebar-link">Qt 构成</a></li><li><a href="/qt6book/ch01-meetqt/intro.html" class="sidebar-link">Qt 6 简介</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/qt6book/ch02-start/quick-start" class="sidebar-heading clickable"><span>起步</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/qt6book/ch02-start/quick-start.html" class="sidebar-link">快速开始</a></li><li><a href="/qt6book/ch02-start/install.html" class="sidebar-link">安装 Qt 6 SDK</a></li><li><a href="/qt6book/ch02-start/hello-world.html" class="sidebar-link">Hello World</a></li><li><a href="/qt6book/ch02-start/app-types.html" class="sidebar-link">应用类型</a></li><li><a href="/qt6book/ch02-start/summary.html" class="sidebar-link">摘要</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/qt6book/ch03-qtcreator/qt-creator" class="sidebar-heading clickable"><span>Qt Creator IDE</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/qt6book/ch03-qtcreator/qt-creator.html" class="sidebar-link">Qt Creator IDE</a></li><li><a href="/qt6book/ch03-qtcreator/user-interface.html" class="sidebar-link">用户界面</a></li><li><a href="/qt6book/ch03-qtcreator/kit-registry.html" class="sidebar-link">注册 Qt 套件</a></li><li><a href="/qt6book/ch03-qtcreator/projects.html" class="sidebar-link">项目管理</a></li><li><a href="/qt6book/ch03-qtcreator/editor.html" class="sidebar-link">使用编辑器</a></li><li><a href="/qt6book/ch03-qtcreator/locator.html" class="sidebar-link">定位器</a></li><li><a href="/qt6book/ch03-qtcreator/debugging.html" class="sidebar-link">调试</a></li><li><a href="/qt6book/ch03-qtcreator/shortcuts.html" class="sidebar-link">快捷键</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/qt6book/ch04-qmlstart/quick-start" class="sidebar-heading clickable open"><span>快速开始</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/qt6book/ch04-qmlstart/quick-start.html" class="sidebar-link">快速开始</a></li><li><a href="/qt6book/ch04-qmlstart/qml-syntax.html" aria-current="page" class="active sidebar-link">QML 语法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/qt6book/ch04-qmlstart/qml-syntax.html#属性" class="sidebar-link">属性</a></li><li class="sidebar-sub-header"><a href="/qt6book/ch04-qmlstart/qml-syntax.html#脚本" class="sidebar-link">脚本</a></li><li class="sidebar-sub-header"><a href="/qt6book/ch04-qmlstart/qml-syntax.html#绑定" class="sidebar-link">绑定</a></li></ul></li><li><a href="/qt6book/ch04-qmlstart/core-elements.html" class="sidebar-link">核心元素</a></li><li><a href="/qt6book/ch04-qmlstart/components.html" class="sidebar-link">组件</a></li><li><a href="/qt6book/ch04-qmlstart/transformations.html" class="sidebar-link">简单变化</a></li><li><a href="/qt6book/ch04-qmlstart/positioning.html" class="sidebar-link">定位元素</a></li><li><a href="/qt6book/ch04-qmlstart/layout.html" class="sidebar-link">布局元素</a></li><li><a href="/qt6book/ch04-qmlstart/input.html" class="sidebar-link">输入元素</a></li><li><a href="/qt6book/ch04-qmlstart/advanced.html" class="sidebar-link">进阶技巧</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/qt6book/ch05-fluid/fluid-elements" class="sidebar-heading clickable"><span>流式元素</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/qt6book/ch05-fluid/fluid-elements.html" class="sidebar-link">流式元素</a></li><li><a href="/qt6book/ch05-fluid/animations.html" class="sidebar-link">动画</a></li><li><a href="/qt6book/ch05-fluid/states-transitions.html" class="sidebar-link">状态和过渡</a></li><li><a href="/qt6book/ch05-fluid/advanced.html" class="sidebar-link">进阶技巧</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/qt6book/ch06-controls/controls2" class="sidebar-heading clickable"><span>QtQuick Controls</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/qt6book/ch06-controls/controls2.html" class="sidebar-link">UI Controls</a></li><li><a href="/qt6book/ch06-controls/introduction.html" class="sidebar-link">Controls 简介</a></li><li><a href="/qt6book/ch06-controls/image-viewer.html" class="sidebar-link">Image 查看器</a></li><li><a href="/qt6book/ch06-controls/common-patterns.html" class="sidebar-link">Common Patterns</a></li><li><a href="/qt6book/ch06-controls/imagine-style.html" class="sidebar-link">The Imagine Style</a></li><li><a href="/qt6book/ch06-controls/summary.html" class="sidebar-link">Summary</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/qt6book/ch07-modelview/model-view" class="sidebar-heading clickable"><span>Model View</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/qt6book/ch07-modelview/model-view.html" class="sidebar-link">Model-View-Delegate</a></li><li><a href="/qt6book/ch07-modelview/concept.html" class="sidebar-link">Concept</a></li><li><a href="/qt6book/ch07-modelview/basic-models.html" class="sidebar-link">Basic Models</a></li><li><a href="/qt6book/ch07-modelview/dynamic-views.html" class="sidebar-link">Dynamic Views</a></li><li><a href="/qt6book/ch07-modelview/delegate.html" class="sidebar-link">Delegate</a></li><li><a href="/qt6book/ch07-modelview/advanced.html" class="sidebar-link">Advanced Techniques</a></li><li><a href="/qt6book/ch07-modelview/summary.html" class="sidebar-link">Summary</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/qt6book/ch08-canvas/canvas-element" class="sidebar-heading clickable"><span>Canvas</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/qt6book/ch08-canvas/canvas-element.html" class="sidebar-link">Canvas Element</a></li><li><a href="/qt6book/ch08-canvas/convenience-api.html" class="sidebar-link">Convenience API</a></li><li><a href="/qt6book/ch08-canvas/gradients.html" class="sidebar-link">Gradients</a></li><li><a href="/qt6book/ch08-canvas/shadows.html" class="sidebar-link">Shadows</a></li><li><a href="/qt6book/ch08-canvas/images.html" class="sidebar-link">Images</a></li><li><a href="/qt6book/ch08-canvas/transformation.html" class="sidebar-link">Transformation</a></li><li><a href="/qt6book/ch08-canvas/composition-modes.html" class="sidebar-link">Composition Modes</a></li><li><a href="/qt6book/ch08-canvas/pixel-buffer.html" class="sidebar-link">Pixel Buffers</a></li><li><a href="/qt6book/ch08-canvas/canvas-paint.html" class="sidebar-link">Canvas Paint</a></li><li><a href="/qt6book/ch08-canvas/port-from-html.html" class="sidebar-link">Porting from HTML5 Canvas</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/qt6book/ch09-shapes/shapes" class="sidebar-heading clickable"><span>Shapes</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/qt6book/ch09-shapes/shapes.html" class="sidebar-link">Shapes</a></li><li><a href="/qt6book/ch09-shapes/basics.html" class="sidebar-link">A Basic Shape</a></li><li><a href="/qt6book/ch09-shapes/paths.html" class="sidebar-link">Building Paths</a></li><li><a href="/qt6book/ch09-shapes/gradients.html" class="sidebar-link">Filling Shapes</a></li><li><a href="/qt6book/ch09-shapes/animations.html" class="sidebar-link">Animating Shapes</a></li><li><a href="/qt6book/ch09-shapes/summary.html" class="sidebar-link">Summary</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/qt6book/ch10-effects/effects" class="sidebar-heading clickable"><span>Effects</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/qt6book/ch10-effects/effects.html" class="sidebar-link">Effects in QML</a></li><li><a href="/qt6book/ch10-effects/particles.html" class="sidebar-link">Particle Concept</a></li><li><a href="/qt6book/ch10-effects/simple-simulation.html" class="sidebar-link">Simple Simulation</a></li><li><a href="/qt6book/ch10-effects/particle-parameters.html" class="sidebar-link">Particle Parameters</a></li><li><a href="/qt6book/ch10-effects/directed-particles.html" class="sidebar-link">Directed Particles</a></li><li><a href="/qt6book/ch10-effects/affecting-particles.html" class="sidebar-link">Affecting Particles</a></li><li><a href="/qt6book/ch10-effects/particle-groups.html" class="sidebar-link">Particle Groups</a></li><li><a href="/qt6book/ch10-effects/particle-painters.html" class="sidebar-link">Particle Painters</a></li><li><a href="/qt6book/ch10-effects/opengl-shaders.html" class="sidebar-link">Graphics Shaders</a></li><li><a href="/qt6book/ch10-effects/shader-elements.html" class="sidebar-link">Shader Elements</a></li><li><a href="/qt6book/ch10-effects/fragment-shaders.html" class="sidebar-link">Fragment Shaders</a></li><li><a href="/qt6book/ch10-effects/wave-effect.html" class="sidebar-link">Wave Effect</a></li><li><a href="/qt6book/ch10-effects/vertex-shader.html" class="sidebar-link">Vertex Shader</a></li><li><a href="/qt6book/ch10-effects/curtain-effect.html" class="sidebar-link">Curtain Effect</a></li><li><a href="/qt6book/ch10-effects/summary.html" class="sidebar-link">Summary</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/qt6book/ch11-multimedia/multimedia" class="sidebar-heading clickable"><span>Multimedia</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/qt6book/ch11-multimedia/multimedia.html" class="sidebar-link">Multimedia</a></li><li><a href="/qt6book/ch11-multimedia/playing-media.html" class="sidebar-link">Playing Media</a></li><li><a href="/qt6book/ch11-multimedia/sound-effects.html" class="sidebar-link">Sound Effects</a></li><li><a href="/qt6book/ch11-multimedia/video-streams.html" class="sidebar-link">Video Streams</a></li><li><a href="/qt6book/ch11-multimedia/capturing-images.html" class="sidebar-link">Capturing Images</a></li><li><a href="/qt6book/ch11-multimedia/summary.html" class="sidebar-link">Summary</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/qt6book/ch12-qtquick3d/intro" class="sidebar-heading clickable"><span>Qt Quick 3D</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/qt6book/ch12-qtquick3d/intro.html" class="sidebar-link">Qt Quick 3D</a></li><li><a href="/qt6book/ch12-qtquick3d/basics.html" class="sidebar-link">The Basics</a></li><li><a href="/qt6book/ch12-qtquick3d/assets.html" class="sidebar-link">Working with Assets</a></li><li><a href="/qt6book/ch12-qtquick3d/materials-and-light.html" class="sidebar-link">Materials and Light</a></li><li><a href="/qt6book/ch12-qtquick3d/animations.html" class="sidebar-link">Animations</a></li><li><a href="/qt6book/ch12-qtquick3d/mixing-2d-and-3d.html" class="sidebar-link">Mixing 2D and 3D Contents</a></li><li><a href="/qt6book/ch12-qtquick3d/summary.html" class="sidebar-link">Summary</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/qt6book/ch13-networking/networking" class="sidebar-heading clickable"><span>Networking</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/qt6book/ch13-networking/networking.html" class="sidebar-link">Networking</a></li><li><a href="/qt6book/ch13-networking/serve-qml.html" class="sidebar-link">Serving UI via HTTP</a></li><li><a href="/qt6book/ch13-networking/templates.html" class="sidebar-link">Templates</a></li><li><a href="/qt6book/ch13-networking/http-requests.html" class="sidebar-link">HTTP Requests</a></li><li><a href="/qt6book/ch13-networking/local-files.html" class="sidebar-link">Local files</a></li><li><a href="/qt6book/ch13-networking/rest-api.html" class="sidebar-link">REST API</a></li><li><a href="/qt6book/ch13-networking/authentication.html" class="sidebar-link">Authentication using OAuth</a></li><li><a href="/qt6book/ch13-networking/web-sockets.html" class="sidebar-link">Web Sockets</a></li><li><a href="/qt6book/ch13-networking/summary.html" class="sidebar-link">Summary</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/qt6book/ch14-storage/storage" class="sidebar-heading clickable"><span>Storage</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/qt6book/ch14-storage/storage.html" class="sidebar-link">Storage</a></li><li><a href="/qt6book/ch14-storage/settings.html" class="sidebar-link">Settings</a></li><li><a href="/qt6book/ch14-storage/local-storage.html" class="sidebar-link">Local Storage - SQL</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/qt6book/ch15-dynamicqml/dynamic-qml" class="sidebar-heading clickable"><span>Dynamic QML</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/qt6book/ch15-dynamicqml/dynamic-qml.html" class="sidebar-link">Dynamic QML</a></li><li><a href="/qt6book/ch15-dynamicqml/loading-components.html" class="sidebar-link">Loading Components Dynamically</a></li><li><a href="/qt6book/ch15-dynamicqml/dynamic-objects.html" class="sidebar-link">Creating and Destroying Objects</a></li><li><a href="/qt6book/ch15-dynamicqml/tracking-objects.html" class="sidebar-link">Tracking Dynamic Objects</a></li><li><a href="/qt6book/ch15-dynamicqml/summary.html" class="sidebar-link">Summary</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/qt6book/ch16-javascript/javascript" class="sidebar-heading clickable"><span>Javascript</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/qt6book/ch16-javascript/javascript.html" class="sidebar-link">JavaScript</a></li><li><a href="/qt6book/ch16-javascript/html-qml.html" class="sidebar-link">Browser/HTML vs Qt Quick/QML</a></li><li><a href="/qt6book/ch16-javascript/js-language.html" class="sidebar-link">JS Language</a></li><li><a href="/qt6book/ch16-javascript/js-objects.html" class="sidebar-link">JS Objects</a></li><li><a href="/qt6book/ch16-javascript/js-console.html" class="sidebar-link">Creating a JS Console</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/qt6book/ch17-qtcpp/qtcpp" class="sidebar-heading clickable"><span>Qt C++</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/qt6book/ch17-qtcpp/qtcpp.html" class="sidebar-link">Qt and C++</a></li><li><a href="/qt6book/ch17-qtcpp/boilerplate.html" class="sidebar-link">A Boilerplate Application</a></li><li><a href="/qt6book/ch17-qtcpp/qobject.html" class="sidebar-link">The QObject</a></li><li><a href="/qt6book/ch17-qtcpp/build-system.html" class="sidebar-link">Build Systems</a></li><li><a href="/qt6book/ch17-qtcpp/common-classes.html" class="sidebar-link">Common Qt Classes</a></li><li><a href="/qt6book/ch17-qtcpp/cpp-models.html" class="sidebar-link">Models in C++</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/qt6book/ch18-extensions/extending-qml" class="sidebar-heading clickable"><span>Extending QML</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/qt6book/ch18-extensions/extending-qml.html" class="sidebar-link">Extending QML with C++</a></li><li><a href="/qt6book/ch18-extensions/qml-runtime.html" class="sidebar-link">Understanding the QML Run-time</a></li><li><a href="/qt6book/ch18-extensions/plugin-content.html" class="sidebar-link">Plugin Content</a></li><li><a href="/qt6book/ch18-extensions/create-plugin.html" class="sidebar-link">Creating the plugin</a></li><li><a href="/qt6book/ch18-extensions/fileio-demo.html" class="sidebar-link">FileIO Implementation</a></li><li><a href="/qt6book/ch18-extensions/using-fileio.html" class="sidebar-link">Using FileIO</a></li><li><a href="/qt6book/ch18-extensions/summary.html" class="sidebar-link">Summary</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/qt6book/ch19-python/qt-python" class="sidebar-heading clickable"><span>Qt for Python</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/qt6book/ch19-python/qt-python.html" class="sidebar-link">Qt for Python</a></li><li><a href="/qt6book/ch19-python/introduction.html" class="sidebar-link">Introduction</a></li><li><a href="/qt6book/ch19-python/installing.html" class="sidebar-link">Installing</a></li><li><a href="/qt6book/ch19-python/build-app.html" class="sidebar-link">Building an Application</a></li><li><a href="/qt6book/ch19-python/limitations.html" class="sidebar-link">Limitations</a></li><li><a href="/qt6book/ch19-python/summary.html" class="sidebar-link">Summary</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/qt6book/ch20-qtformcu/qtformcu" class="sidebar-heading clickable"><span>Qt for MCUs</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/qt6book/ch20-qtformcu/qtformcu.html" class="sidebar-link">Qt for MCUs</a></li><li><a href="/qt6book/ch20-qtformcu/setup.html" class="sidebar-link">Setup</a></li><li><a href="/qt6book/ch20-qtformcu/helloworld.html" class="sidebar-link">Hello World - for MCUs</a></li><li><a href="/qt6book/ch20-qtformcu/cpp.html" class="sidebar-link">Integrating with C++</a></li><li><a href="/qt6book/ch20-qtformcu/models.html" class="sidebar-link">Working with Models</a></li><li><a href="/qt6book/ch20-qtformcu/summary.html" class="sidebar-link">Summary</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="qml-语法"><a href="#qml-语法" class="header-anchor">#</a> QML 语法</h1> <p>QML 是一种描述对象间如何互相关联的声明式语言。QtQuick 是基于 QML 的框架，用于构建用户界面。它将用户界面拆分成更小的元素，这些元素可以构成组件。QtQuick 描述了这些用户元素的外观和行为。此用户界面描述可用 JavaScript 扩充功能，提供简单或复杂的逻辑。从这个角度来看，它遵循HTML-JavaScript模式，但QML和QtQuick是从头开始设计的，用于描述用户界面，而不是文本文档。</p> <p>在最简单的形式下，QtQuick 允许创建层级结构。子元素继承了父元素的坐标系。一个 <code>x,y</code> 坐标总是关联其父。</p> <div class="custom-block tip"><p class="custom-block-title">提示</p> <p>QtQuick 构建在 QML 之上。QML 语言仅知道元素，属性，信号和绑定。QtQuick 是一个基于 QML 的框架。使用默认属性，QtQuick元素的层次结构可以以一种优雅的方式构建。</p></div> <p><img src="/qt6book/assets/img/scene.05a84ac6.png" alt=""></p> <p>让我们从一个简单的QML文件示例开始，以解释不同的语法。</p> <div class="language-qml extra-class"><pre class="language-qml"><code><span class="token comment">// RectangleExample.qml</span>

<span class="token keyword">import</span> QtQuick

<span class="token comment">// 根元素是 Rectangle</span>
<span class="token class-name">Rectangle</span> <span class="token punctuation">{</span>
    <span class="token comment">// 命名此元素为 root</span>
    <span class="token property">id</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">root</span>

    <span class="token comment">// 属性: &lt;name&gt;: &lt;value&gt;</span>
    <span class="token property">width</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token number">120</span></span><span class="token punctuation">;</span> <span class="token property">height</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token number">240</span></span>

    <span class="token comment">// 颜色属性</span>
    <span class="token property">color</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token string">&quot;#4A4A4A&quot;</span></span>

    <span class="token comment">// 申明嵌套元素（root 的儿子）</span>
    <span class="token class-name">Image</span> <span class="token punctuation">{</span>
        <span class="token property">id</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">triangle</span>

        <span class="token comment">// reference the parent</span>
        <span class="token property">x</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token punctuation">(</span>parent<span class="token punctuation">.</span>width <span class="token operator">-</span> width<span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">2</span></span><span class="token punctuation">;</span> <span class="token property">y</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token number">40</span></span>

        <span class="token property">source</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token string">'assets/triangle_red.png'</span></span>
    <span class="token punctuation">}</span>

    <span class="token comment">// root 元素的另一个儿子</span>
    <span class="token class-name">Text</span> <span class="token punctuation">{</span>
        <span class="token comment">// 未命名元素</span>

        <span class="token comment">// 通过 id 引用元素</span>
        <span class="token property">y</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">triangle<span class="token punctuation">.</span>y <span class="token operator">+</span> triangle<span class="token punctuation">.</span>height <span class="token operator">+</span> <span class="token number">20</span></span>

        <span class="token comment">// 引用根元素</span>
        <span class="token property">width</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">root<span class="token punctuation">.</span>width</span>

        <span class="token property">color</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token string">'white'</span></span>
        <span class="token property">horizontalAlignment</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">Text<span class="token punctuation">.</span>AlignHCenter</span>
        <span class="token property">text</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token string">'Triangle'</span></span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div><ul><li><code>import</code> 语句导入模块。可以添加一个可选的 <code>&lt;major&gt;.&lt;minor&gt;</code> 版本。</li> <li>就像 C/C++ 和 JavaScript 一样，可用 <code>//</code> 添加单行注释，<code>/* */</code> 添加多行注释。</li> <li>每份 QML 文件只能有一个根元素，就像 HTML 一样</li> <li>一个元素由其类型声明，后面跟着 <code>{ }</code></li> <li>元素可以有属性，形式如 <code>name: value</code></li> <li>QML 文档内的任意元素可通过其 <code>id</code> （一个没有引号包裹的标识符）访问。</li> <li>元素可以嵌套，意味着父元素可以有子元素。父元素可通过 <code>parent</code> 关键字访问</li></ul> <p>通过 <code>import</code> 语句，你通过名称导入了一个 QML 模块。在 Qt5 中，需要指定主要版本和次要版本，如 <code>2.15</code>，这在 Qt6 中是可选的。在本书中，我们抛弃了这个可选的版本号，因为你一般会使用所选的 Qt 套件的适配的最新版本。</p> <div class="custom-block tip"><p class="custom-block-title">提示</p> <p>通常你希望使用 id 或 <code>parent</code> 关键字访问特定元素。所以，利用 <code>id: root</code>，将根元素命名为 &quot;root&quot; 是个不错的选择。后续，你就无需考虑 QML 文档中，根元素的名称了。</p></div> <div class="custom-block tip"><p class="custom-block-title">提示</p> <p>可以使用 Qt Quick 运行时从命令行运行实例，如下所示：</p> <div class="language- extra-class"><pre><code>$ $QTDIR/bin/qml RectangleExample.qml
</code></pre></div><p>需要将 <code>$QTDIR</code> 替换成您的 Qt 安装路径。<code>qml</code> 可执行程序初始化了 Qt Quick 运行环境，解释执行提供的 QML 文件。</p> <p>在 Qt Creator 中，你可以打开对应的工程，运行 <code>RectangleExample.qml</code>。</p></div> <h2 id="属性"><a href="#属性" class="header-anchor">#</a> 属性</h2> <p>元素由其名称声明，由属性和自定义属性定义。一个属性就是一个键值对，如 <code>width: 100</code>，<code>text: 'Greetings'</code>，<code>color: '#FF0000'</code>。属性会指定类型，且可以拥有初值。</p> <div class="language-qml extra-class"><pre class="language-qml"><code><span class="token class-name">Text</span> <span class="token punctuation">{</span>
    <span class="token comment">// (1) 标识符</span>
    <span class="token property">id</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">thisLabel</span>

    <span class="token comment">// (2) 设置 x y 坐标</span>
    <span class="token property">x</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token number">24</span></span><span class="token punctuation">;</span> <span class="token property">y</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token number">16</span></span>

    <span class="token comment">// (3) 绑定高度为 2 * width</span>
    <span class="token property">height</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token number">2</span> <span class="token operator">*</span> width</span>

    <span class="token comment">// (4) 自定义属性</span>
    <span class="token property"><span class="token keyword">property</span> <span class="token property">int</span> <span class="token property">times</span></span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token number">24</span></span>

    <span class="token comment">// (5) 属性别名</span>
    <span class="token property"><span class="token keyword">property</span> <span class="token property">alias</span> <span class="token property">anotherTimes</span></span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">thisLabel<span class="token punctuation">.</span>times</span>

    <span class="token comment">// (6) 设置文本拼接内容</span>
    <span class="token property">text</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token string">&quot;Greetings &quot;</span> <span class="token operator">+</span> times</span>

    <span class="token comment">// (7) 字体是个分组属性</span>
    <span class="token property">font.family</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token string">&quot;Ubuntu&quot;</span></span>
    <span class="token property">font.pixelSize</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token number">24</span></span>

    <span class="token comment">// (8) KeyNavigation 是个附件属性</span>
    <span class="token property">KeyNavigation.tab</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">otherLabel</span>

    <span class="token comment">// (9) 属性变更时的信号处理</span>
    <span class="token property">onHeightChanged</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'height:'</span><span class="token punctuation">,</span> height<span class="token punctuation">)</span></span>

    <span class="token comment">// 需要焦点接收键盘事件</span>
    <span class="token property">focus</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token boolean">true</span></span>

    <span class="token comment">// 根据 focus 的值改变颜色</span>
    <span class="token property">color</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">focus <span class="token operator">?</span> <span class="token string">&quot;red&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;black&quot;</span></span>
<span class="token punctuation">}</span>
</code></pre></div><p>让我们看看属性的不同特性：</p> <ul><li><p><strong>(1)</strong> <code>id</code> 是个非常特殊的类属性值，用于在 QML 文件（称为 &quot;文档&quot;）内引用元素。<code>id</code> 不是字符串类型的，而是一个标识符，是 QML 语言的一部分。文档内的 <code>id</code> 不能重复，且无法修改和查询（行为类似 C++ 中的引用）。</p></li> <li><p><strong>(2)</strong> 属性可以根据其类型赋予其值。若没有赋值，则会自动选择初值。你需要查询文档中该元素的属性初值相关的内容。</p></li> <li><p><strong>(3)</strong> 属性值可以依赖一个或多个其它属性，这被称为 <em>绑定</em>。绑定属性会在其依赖属性修改时更新。就像签了合同，在本例中，<code>height</code> 总是两倍的 <code>width</code>。</p></li> <li><p><strong>(4)</strong> 可以通过修饰符 <code>property</code>，名称和可选的初值(<code>property &lt;type&gt; &lt;name&gt; : &lt;value&gt;</code>)为元素添加新属性。若未指定初值，则会选择默认初值。</p></li></ul> <div class="custom-block tip"><p class="custom-block-title">提示</p> <p>也可通过关键字 <code>default</code> 将某个属性申明为默认属性。若在元素内创建了另一个元素，且未显式地绑定至一个属性，它将绑定至默认属性。举例来说，这通常在你添加子元素时使用。可见子元素会自动加入列表类型的默认属性 <code>children</code>。</p></div> <ul><li><p><strong>(5)</strong> 另一种申明属性的重要方式是通过 <code>alias</code> 关键字(<code>property alias &lt;name&gt;: &lt;reference&gt;</code>)。<code>alias</code> 关键字允许我们将对象的属性或对象本身的从类型内转发到外部作用域。稍后在定义组件时，我们将使用这种技术将内部属性或元素id导出到根级别。属性别名无需类型，它直接使用其指向的属性或对象的类型。</p></li> <li><p><strong>(6)</strong> <code>text</code> 属性依赖 int 类型的自定义属性 <code>times</code>。该 <code>int</code> 类型的值会自动转换为 <code>string</code> 类型。该表达式也是另一个例子，每次 <code>times</code> 属性变更，都会使得 text 被更新。</p></li> <li><p><strong>(7)</strong> 某些属性是分组属性。该特性用于当某个属性更加结构化，且需要分组打包时。另一种书写分组属性的方法是 <code>font { family: &quot;Ubuntu&quot;; pixelSize: 24 }</code>。</p></li> <li><p><strong>(8)</strong> 一些属性属于元素所属类。全局设置元素只在应用程序中出现一次（如，键盘输入）。写法是 <code>&lt;Element&gt;.&lt;property&gt;: &lt;value&gt;</code>。</p></li> <li><p><strong>(9)</strong> 对于每个属性，你可提供一个信号处理器。该处理器会在属性值修改后被调用。例如，我们期望在高度变更时收到通知，使用内置的控制台打印日志。</p></li></ul> <div class="custom-block warning"><p class="custom-block-title">警告</p> <p>元素 id 应仅被用于在文档内引用元素（即当前文件）。QML 提供了称为“动态作用域”的机制，后加载的文件会覆盖以前加载的文件的元素 ID。这使得在后加载的文件中引用之前未被覆盖的 id 成为可能。就像创建了全局变量。不幸地是，实践中这通常导致屎山代码，因为程序依赖其执行顺序。更糟的是，无法关闭该机制。请小心谨慎地使用此机制，或者，干脆别用。在文件的根元素上导出需要提供给外部作用域的元素是个更好的办法。</p></div> <h2 id="脚本"><a href="#脚本" class="header-anchor">#</a> 脚本</h2> <p>QML 和 JavaScript（也被称为 ECMAScript）是最佳拍档。在 <em>JavaScript</em> 章节，我们会更加深入这种共生关系。目前，你只需知道这种关系的存在。</p> <div class="language-qml extra-class"><pre class="language-qml"><code><span class="token class-name">Text</span> <span class="token punctuation">{</span>
    <span class="token property">id</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">label</span>

    <span class="token property">x</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token number">24</span></span><span class="token punctuation">;</span> <span class="token property">y</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token number">24</span></span>

    <span class="token comment">// 用于记录按下几次空格的自定义属性</span>
    <span class="token property"><span class="token keyword">property</span> <span class="token property">int</span> <span class="token property">spacePresses</span></span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token number">0</span></span>

    <span class="token property">text</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token string">&quot;Space pressed: &quot;</span> <span class="token operator">+</span> spacePresses <span class="token operator">+</span> <span class="token string">&quot; times&quot;</span></span>

    <span class="token comment">// (1) 文本变更处理器。需要用函数捕获参数</span>
    <span class="token property">onTextChanged</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">text</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;text changed to:&quot;</span><span class="token punctuation">,</span> text<span class="token punctuation">)</span>
    <span class="token punctuation">}</span></span>

    <span class="token comment">// 需要焦点接收键盘事件</span>
    <span class="token property">focus</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token boolean">true</span></span>

    <span class="token comment">// (2) 包含 JS 代码的处理器</span>
    <span class="token property">Keys.onSpacePressed</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token punctuation">{</span>
        <span class="token function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span></span>

    <span class="token comment">// 按下 escape 时清空文本</span>
    <span class="token property">Keys.onEscapePressed</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token punctuation">{</span>
        label<span class="token punctuation">.</span>text <span class="token operator">=</span> <span class="token string">''</span>
    <span class="token punctuation">}</span></span>

    <span class="token comment">// (3) 一个 JS 函数</span>
    <span class="token javascript-function language-javascript"><span class="token keyword">function</span> <span class="token function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        spacePresses <span class="token operator">=</span> spacePresses <span class="token operator">+</span> <span class="token number">1</span>
    <span class="token punctuation">}</span></span>
<span class="token punctuation">}</span></code></pre></div><ul><li><p><strong>(1)</strong> 每次空格键被按下时，监听文本变更的处理器 <code>onTextChanged</code> 都会打印文本。因为我们需要使用信号注入的参数，所以这里得用函数语法。也可用箭头函数(<code>(text) =&gt; {}</code>)，但我们觉得 <code>function(text) {}</code> 更具可读性。</p></li> <li><p><strong>(2)</strong> 当 text 元素收到空格键（因为用户在键盘上按下了空格键），会调用 JavaScript 函数 <code>increment()</code>。</p></li> <li><p><strong>(3)</strong> 定义形如 <code>function &lt;name&gt;(&lt;parameters&gt;) { ... }</code> 的 JavaScript 函数会增加计数器 <code>spacePresses</code>。每次 <code>spacePresses</code> 增加后，绑定属性也会被更新。</p></li></ul> <h2 id="绑定"><a href="#绑定" class="header-anchor">#</a> 绑定</h2> <p>QML 的 <code>:</code> (绑定) 和 JavaScript 的 <code>=</code> (赋值) 的区别是，绑定是一个合约，且在绑定周期内一直生效，而 JavaScript 的赋值(<code>=</code>)仅是单次操作。</p> <p>为属性设置新绑定或将一个 JavaScript 值赋予该属性都会终止绑定的生命周期。例如，一个将 text 属性设置为空字符串的按键处理器会停止增长显示：</p> <div class="language-qml extra-class"><div class="highlight-lines"><br><div class="highlighted"> </div><br></div><pre class="language-qml"><code><span class="token property">Keys.onEscapePressed</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token punctuation">{</span>
    label<span class="token punctuation">.</span>text <span class="token operator">=</span> <span class="token string">''</span>
<span class="token punctuation">}</span></span></code></pre></div><p>按下 escape 键后，再按空格键将不会更新文本显示，因为 <code>text</code> 属性之前的绑定 (<em>text: “Space pressed: ” + spacePresses + ” times”</em>) 被破坏了。</p> <p>当你有如本例中冲突的策略去修改属性时（通过绑定更新文本和通过 JavaScipt 赋值清空文本），你就不能用绑定！你应该在两个属性变更时都使用赋值，因为绑定关系会被赋值破坏。</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/dogifyc/qt6book/edit/main/docs/ch04-qmlstart/qml-syntax.md" target="_blank" rel="noopener noreferrer">Help us improve this page!</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/qt6book/ch04-qmlstart/quick-start.html" class="prev">
        快速开始
      </a></span> <span class="next"><a href="/qt6book/ch04-qmlstart/core-elements.html">
        核心元素
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/qt6book/assets/js/app.49f675f8.js" defer></script><script src="/qt6book/assets/js/2.ea318f3c.js" defer></script><script src="/qt6book/assets/js/51.1a5823e9.js" defer></script>
  </body>
</html>
